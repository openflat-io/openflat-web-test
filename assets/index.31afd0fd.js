import{q as e,m as p,aZ as C,A as R,ab as le,aB as J,aE as q,x as Ue,bv as z,k as r,b4 as ke,bw as be,b8 as O,b3 as X,ba as Q,bx as ne,by as x,aP as Z,bz as Ce,bA as se,n as Y,az as ce,bB as Se,aD as _,bc as G,bC as de,y as Me,z as $,bD as W,bE as De,b2 as K,bF as b,bG as Ie}from"./index.43c4ffc0.js";import{u as ee,e as A}from"./routes.73fc4946.js";import{u as te}from"./lifecycle.32153b61.js";import{j as ue}from"./join-room-handler.9b9ed9e0.js";import{S as Re}from"./SVGMore.b630e8ac.js";import{S as Be}from"./Skeleton.b37802c7.js";import{I as Ne}from"./index.891e0e8b.js";import{R as Oe}from"./index.065cff0d.js";import{u as He}from"./use-login-check.e01c4832.js";import{A as Ee}from"./index.cdec5d78.js";const Te=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function me(n){return typeof n=="string"&&Te.test(n)}function Ve(n){if(!me(n))throw TypeError("Invalid UUID");return parseInt(n.slice(14,15),16)}const Ge=()=>e("svg",{className:"svg-join",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",children:p("g",{fill:"none",fillRule:"evenodd",children:[e("circle",{className:"svg-join-background",cx:"20",cy:"20",fill:"#3381FF",r:"20"}),e("path",{d:"M8 8h24v24H8z",fill:"#FFF",opacity:".01"}),e("path",{d:"m20 13 6-2v16l-6 2z",fill:"#FFF",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"}),e("path",{d:"M18 27h-4V11h12v16",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),Le=()=>e("svg",{className:"svg-begin",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",children:p("g",{fill:"none",fillRule:"evenodd",children:[e("circle",{className:"svg-begin-background",cx:"20",cy:"20",fill:"#3381FF",r:"20"}),e("path",{d:"M8 8h24v24H8z",fill:"#FFF",opacity:".01"}),e("path",{d:"M11 20h18m-9-9v18",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),Pe=()=>e("svg",{className:"svg-schedule",viewBox:"0 0 40 40",xmlns:"http://www.w3.org/2000/svg",children:p("g",{fill:"none",fillRule:"evenodd",children:[e("circle",{className:"svg-schedule-background",cx:"20",cy:"20",fill:"#3381FF",r:"20"}),e("path",{d:"M8 8h24v24H8z",fill:"#FFF",opacity:".01"}),e("path",{d:"M12 14h16v14H12zm4-2v2m8-2v4",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"}),e("path",{d:"M12 18h16v-3a1 1 0 0 0-1-1H13a1 1 0 0 0-1 1v3Z",fill:"#FFF",stroke:"#FFF",strokeLinejoin:"round",strokeWidth:"1.25"})]})}),Ze={join:Ge,begin:Le,schedule:Pe},oe=({type:n,onClick:a})=>{const t=C();return p(R,{className:"home-page-hero-button",onClick:a,children:[e("span",{className:"home-page-hero-button-icon",children:le.createElement(Ze[n])}),e("span",{className:"home-page-hero-button-text",children:t(`home-page-hero-button-type.${n}`)})]})};function Ae({actions:n,onAction:a}){return e(J,{overlay:e(q,{items:n.map(t=>({key:t.key,onClick:()=>a(t.key),label:t.text}))}),overlayClassName:"room-list-item-sub-menu",trigger:["click"],children:e(R,{className:"room-list-item-more",type:"text",children:e(Re,{})})})}function _e({title:n,beginTime:a,endTime:t,ownerName:i,ownerAvatar:d,status:s,isPeriodic:y,menuActions:h,primaryAction:u,onClick:w,onAction:F}){const S=C();return e("div",{className:Ue("room-list-item",{pointer:!!w}),children:p("div",{className:"room-list-item-content",children:[d&&e("div",{className:"room-list-item-left",children:e("figure",{className:"room-list-item-owner-avatar",title:i,children:e("img",{alt:i,src:d})})}),p("div",{className:"room-list-item-middle",onClick:w,children:[e("h1",{className:"room-list-item-title",children:n}),p("div",{className:"room-list-item-time-date",children:[p("span",{className:"room-list-item-time",children:[a&&z(a,"HH:mm")," ~ ",t&&z(t,"HH:mm")]}),e("span",{className:"room-list-item-date",children:a&&z(a,"yyyy/MM/dd")}),e("span",{children:y&&`(${S("periodic")})`})]}),e("div",{children:e("span",{className:`room-list-item-status-${s==="upcoming"?"warning":s==="running"?"success":"default"}`,children:S(`room-status.${s}`)})})]}),p("div",{className:"room-list-item-right",children:[h&&e(Ae,{actions:h,onAction:F}),u&&e(R,{className:"room-list-item-primary-action",disabled:u.disabled,type:u.type,onClick:()=>F(u.key),children:u.text},u.key)]})]})})}const je="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23F4F8FF' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cg filter='url(%23a)'%3e%3cpath fill='white' d='M65 60c0-5.523-4.477-10-10-10h82c5.523 0 10 4.477 10 10v90H75c-5.523 0-10-4.477-10-10V60Z'/%3e%3c/g%3e%3cpath fill='%235B9AFF' d='M75 150c5.523 0 10-4.477 10-10h80c0 5.523-4.477 10-10 10H75Z'/%3e%3cpath fill='%232867CC' d='M45 60h20c0-5.523-4.477-10-10-10s-10 4.477-10 10Z'/%3e%3cpath fill='%23EBF2FF' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3cmask id='b' width='73' height='73' x='103' y='42' maskUnits='userSpaceOnUse' style='mask-type:alpha'%3e%3cpath fill='white' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3c/mask%3e%3cg mask='url(%23b)'%3e%3cpath fill='%23050D1A' fill-rule='evenodd' d='m104.352 109.406 4.242 4.242-2.828 2.829-4.243-4.243 2.829-2.828Z' clip-rule='evenodd'/%3e%3c/g%3e%3cpath fill='%235B9AFF' d='m166.577 44.352 7.07 7.071-60.81 60.811-7.071-7.07z'/%3e%3cpath fill='%233381FF' d='m164.456 52.13 1.414 1.414-50.911 50.912-1.415-1.414z'/%3e%3cpath fill='url(%23c)' d='M25 110c0-13.255 10.745-24 24-24s24 10.745 24 24v24H49c-13.255 0-24-10.745-24-24Z' style='mix-blend-mode:multiply'/%3e%3ccircle cx='39' cy='110' r='3' fill='white'/%3e%3ccircle cx='49' cy='110' r='3' fill='white'/%3e%3ccircle cx='59' cy='110' r='3' fill='white'/%3e%3cdefs%3e%3clinearGradient id='c' x1='1' x2='49' y1='110' y2='158' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%233381FF'/%3e%3cstop offset='1' stop-color='%233381FF' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='152' height='160' x='25' y='40' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.2 0 0 0 0 0.505882 0 0 0 0 1 0 0 0 0.25 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_0_325'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_0_325' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",ze="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23F4F8FF' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cpath fill='%233381FF' fill-rule='evenodd' d='M85 133h30v14H85v-14Z' clip-rule='evenodd'/%3e%3cpath fill='%233381FF' d='M72 143h56v4H72z'/%3e%3cpath fill='%232867CC' fill-rule='evenodd' d='M85 133v10H72v4h25l14-14' clip-rule='evenodd'/%3e%3cg filter='url(%23a)'%3e%3crect width='120' height='80' x='40' y='53' fill='white' rx='4'/%3e%3c/g%3e%3cpath fill='%23F4F8FF' fill-rule='evenodd' d='m47 133 80-80h29a4 4 0 0 1 4 4v72a4 4 0 0 1-4 4H47Z' clip-rule='evenodd'/%3e%3cpath fill='%235B9AFF' d='m52 73 8 2.667-3.556 1.777L54.667 81 52 73Z'/%3e%3cpath stroke='url(%23b)' stroke-dasharray='1' d='M60 81s4.383 18.6 19 21c14.617 2.4 34.416-10.431 48-10 13.584.431 15 12 15 12'/%3e%3cpath fill='%235B9AFF' d='M40 119h120v10a4 4 0 0 1-4 4H44a4 4 0 0 1-4-4v-10Z'/%3e%3ccircle cx='100' cy='126' r='4' fill='%232867CC'/%3e%3cpath fill='url(%23c)' fill-rule='evenodd' d='M116 36a8 8 0 0 0-8 8v28a8 8 0 0 0 8 8h8v12l12-12h20a8 8 0 0 0 8-8V44a8 8 0 0 0-8-8h-40Z' clip-rule='evenodd' style='mix-blend-mode:multiply'/%3e%3cpath fill='white' d='M124 58h24v5h-24zm0-8h16v5h-16z'/%3e%3cdefs%3e%3clinearGradient id='b' x1='184.778' x2='181.375' y1='122.247' y2='72.669' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23D6E5FF' stop-opacity='.01'/%3e%3cstop offset='1' stop-color='%23D6E5FF'/%3e%3c/linearGradient%3e%3clinearGradient id='c' x1='108' x2='108' y1='36' y2='92' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%233381FF'/%3e%3cstop offset='1' stop-color='%233381FF' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='180' height='140' x='10' y='43' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.2 0 0 0 0 0.505882 0 0 0 0 1 0 0 0 0.247897 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_109_618'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_109_618' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",$e="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23272A30' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cg filter='url(%23a)'%3e%3cpath fill='%23ECF0F7' d='M65 60c0-5.523-4.477-10-10-10h82c5.523 0 10 4.477 10 10v86a4 4 0 0 1-4 4H75c-5.523 0-10-4.477-10-10V60Z'/%3e%3c/g%3e%3cpath fill='%237B7E84' fill-rule='evenodd' d='M75 150c5.523 0 10-4.477 10-10h80c0 5.523-4.477 10-10 10H75Z' clip-rule='evenodd'/%3e%3cpath fill='%234B4D54' fill-rule='evenodd' d='M45 60h20c0-5.523-4.477-10-10-10s-10 4.477-10 10Z' clip-rule='evenodd'/%3e%3cpath fill='%23EBF2FF' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3cmask id='b' width='73' height='73' x='103' y='42' maskUnits='userSpaceOnUse' style='mask-type:alpha'%3e%3cpath fill='white' fill-rule='evenodd' d='M167.284 43.645a5 5 0 1 1 7.071 7.07l-61.518 61.519-9.192 2.121 2.121-9.192 61.518-61.518Z' clip-rule='evenodd'/%3e%3c/mask%3e%3cg mask='url(%23b)'%3e%3cpath fill='%23070A11' fill-rule='evenodd' d='m104.352 109.406 4.242 4.242-2.828 2.829-4.243-4.243 2.829-2.828Z' clip-rule='evenodd'/%3e%3c/g%3e%3cpath fill='%237B7E84' d='m166.577 44.352 7.07 7.071-60.81 60.811-7.071-7.07z'/%3e%3cpath fill='%235D6066' d='m164.456 52.13 1.414 1.414-50.912 50.912-1.414-1.414z'/%3e%3cpath fill='url(%23c)' d='M25 110c0-13.255 10.745-24 24-24s24 10.745 24 24v24H49c-13.255 0-24-10.745-24-24Z' style='mix-blend-mode:multiply'/%3e%3ccircle cx='39' cy='110' r='3' fill='%23ECF0F7'/%3e%3ccircle cx='49' cy='110' r='3' fill='%23ECF0F7'/%3e%3ccircle cx='59' cy='110' r='3' fill='%23ECF0F7'/%3e%3cdefs%3e%3clinearGradient id='c' x1='1' x2='49' y1='110' y2='158' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%235D6066'/%3e%3cstop offset='1' stop-color='%235D6066' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='152' height='160' x='25' y='40' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0.247897 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_132_198'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_132_198' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",Ke="data:image/svg+xml;charset=utf8,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 200 200'%3e%3cpath fill='%23272A30' d='M20 100c0-44.183 35.817-80 80-80h80v80c0 44.183-35.817 80-80 80s-80-35.817-80-80Z'/%3e%3cpath fill='%235D6066' fill-rule='evenodd' d='M85 133h30v14H85v-14Z' clip-rule='evenodd'/%3e%3cpath fill='%235D6066' d='M72 143h56v4H72z'/%3e%3cpath fill='%234B4D54' fill-rule='evenodd' d='M85 133v10H72v4h25l14-14' clip-rule='evenodd'/%3e%3cg filter='url(%23a)'%3e%3crect width='120' height='80' x='40' y='53' fill='%23ECF0F7' rx='4'/%3e%3c/g%3e%3cpath fill='%23E5E8F0' fill-rule='evenodd' d='m47 133 80-80h29a4 4 0 0 1 4 4v72a4 4 0 0 1-4 4H47Z' clip-rule='evenodd'/%3e%3cpath fill='%237B7E84' d='m52 73 8 2.667-3.556 1.777L54.667 81 52 73Z'/%3e%3cpath stroke='url(%23b)' stroke-dasharray='1' d='M60 81s4.383 18.6 19 21c14.617 2.4 34.416-10.431 48-10 13.584.431 15 12 15 12'/%3e%3cpath fill='%237B7E84' d='M40 119h120v10a4 4 0 0 1-4 4H44a4 4 0 0 1-4-4v-10Z'/%3e%3ccircle cx='100' cy='126' r='4' fill='%234B4D54'/%3e%3cpath fill='url(%23c)' fill-rule='evenodd' d='M116 36a8 8 0 0 0-8 8v28a8 8 0 0 0 8 8h8v12l12-12h20a8 8 0 0 0 8-8V44a8 8 0 0 0-8-8h-40Z' clip-rule='evenodd' style='mix-blend-mode:multiply'/%3e%3cpath fill='%23ECF0F7' d='M124 58h24v5h-24zm0-8h16v5h-16z'/%3e%3cdefs%3e%3clinearGradient id='b' x1='184.778' x2='181.375' y1='122.247' y2='72.669' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23D5D9E0' stop-opacity='.01'/%3e%3cstop offset='1' stop-color='%23D5D9E0'/%3e%3c/linearGradient%3e%3clinearGradient id='c' x1='108' x2='108' y1='36' y2='92' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%235D6066'/%3e%3cstop offset='1' stop-color='%235D6066' stop-opacity='.01'/%3e%3c/linearGradient%3e%3cfilter id='a' width='180' height='140' x='10' y='43' color-interpolation-filters='sRGB' filterUnits='userSpaceOnUse'%3e%3cfeFlood flood-opacity='0' result='BackgroundImageFix'/%3e%3cfeColorMatrix in='SourceAlpha' result='hardAlpha' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3e%3cfeOffset dy='20'/%3e%3cfeGaussianBlur stdDeviation='15'/%3e%3cfeColorMatrix values='0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0 0.101961 0 0 0 0.247897 0'/%3e%3cfeBlend in2='BackgroundImageFix' result='effect1_dropShadow_132_179'/%3e%3cfeBlend in='SourceGraphic' in2='effect1_dropShadow_132_179' result='shape'/%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e",We=({isHistory:n})=>{const a=C(),t=r.exports.useContext(ke);return p("div",{className:"room-list-empty",children:[e("img",{alt:"empty",height:"160px",src:n?t?$e:je:t?Ke:ze,width:"160px"}),e("span",{className:"room-list-empty-content",children:a(n?"no-record":"no-room")})]})},Je=()=>e("div",{className:"room-list-skeletons",children:Array(4).fill(0).map((n,a)=>e(Be,{active:!0,paragraph:{rows:4,width:["13%","50%","13%","13%"]},title:!1},a))}),qe=()=>{const n=C();return e("div",{className:"room-list-all-loaded",children:e("span",{className:"room-list-all-loaded-content",children:n("all-loaded")})})};function pe({title:n,filters:a,activeTab:t,onTabActive:i,children:d,style:s}){const y=r.exports.useMemo(()=>{var h;return(h=a==null?void 0:a.find(u=>u.key===t))==null?void 0:h.title},[a,t]);return p("div",{className:"room-list",style:s,children:[p("div",{className:"room-list-header",children:[e("h1",{className:"room-list-title",children:n}),a&&e(J,{overlay:e(q,{items:a.map(({title:h,key:u})=>({key:u,onClick:()=>i==null?void 0:i(u),label:h}))}),children:p("span",{className:"room-list-filters",children:[y," ",e(be,{height:24,width:24})]})})]}),e("div",{className:"room-list-body fancy-scrollbar",children:d})]})}const Xe=O(function({visible:a,onCancel:t,onConfirm:i,loading:d}){const s=C();return e(X,{destroyOnClose:!0,footer:[e(R,{onClick:t,children:s("cancel")},"exit-cancel"),e(R,{danger:!0,loading:d,onClick:i,children:s("confirm")},"exit-confirm")],open:a,title:s("delete-room-records"),wrapClassName:"remove-history-room-modal-container",onCancel:t,children:s("delete-room-records-tips")})});const Qe=O(function({onCreateRoom:a}){var T;const t=C(),i=te(),d=r.exports.useContext(Q),s=r.exports.useContext(ne),[y]=x.useForm(),[h,u]=r.exports.useState(!1),[w,F]=r.exports.useState(!1),[S,M]=r.exports.useState(!1),[N,H]=r.exports.useState(s.getRegion()),[L,E]=r.exports.useState(Z.BigClass),m=r.exports.useRef(null),D={roomTitle:(T=d.userInfo)!=null&&T.name?t("create-room-default-title",{name:d.userInfo.name}):"",roomType:Z.BigClass,autoMicOn:s.autoMicOn,autoCameraOn:s.autoCameraOn};r.exports.useEffect(()=>{let c=NaN;return w&&(c=window.setTimeout(()=>{m.current&&(m.current.focus(),m.current.select())},0)),()=>{window.clearTimeout(c)}},[w]);const I=e(q,{className:"create-room-modal-menu-item",items:Ce.map(c=>({key:c,label:p(r.exports.Fragment,{children:[e("img",{alt:c,src:se[c],style:{width:22}}),e("span",{style:{paddingLeft:8},children:t(`region-${c}`)})]})})),style:{width:"auto"},onClick:c=>H(c.key)});return p(Y,{children:[e(oe,{type:"begin",onClick:()=>{y.setFieldsValue(D),F(!0),B()}}),e(X,{forceRender:!0,footer:[e(R,{onClick:P,children:t("cancel")},"cancel"),e(R,{disabled:!S,loading:h,type:"primary",onClick:v,children:t("begin")},"submit")],open:w,title:t("home-page-hero-button-type.begin"),width:400,wrapClassName:"create-room-box-container",onCancel:P,onOk:v,children:p(x,{className:"main-room-menu-form",form:y,initialValues:D,layout:"vertical",name:"createRoom",onFieldsChange:B,children:[e(x.Item,{label:t("theme"),name:"roomTitle",rules:[{required:!0,message:t("enter-room-theme")},{max:50,message:t("theme-can-be-up-to-50-characters")}],children:e(ce,{ref:m,placeholder:t("enter-room-theme"),suffix:e(J,{overlay:I,placement:"bottomRight",trigger:["click"],children:e("img",{alt:N,src:se[N],style:{cursor:"pointer",width:22,marginRight:0}})}),onKeyUp:l})}),e(x.Item,{label:t("type"),name:"roomType",valuePropName:"type",children:e(Se,{value:L,onChange:c=>E(Z[c])})}),p(x.Item,{label:t("join-options"),children:[e(x.Item,{noStyle:!0,name:"autoMicOn",valuePropName:"checked",children:e(_,{children:t("turn-on-the-microphone")})}),e(x.Item,{noStyle:!0,name:"autoCameraOn",valuePropName:"checked",children:e(_,{children:t("turn-on-the-camera")})})]})]})})]});function l(c){c.key==="Enter"&&!c.ctrlKey&&!c.shiftKey&&!c.altKey&&!c.metaKey&&(c.preventDefault(),i(y.validateFields()).then(v))}async function v(){try{await i(y.validateFields())}catch{return}u(!0);try{const c=y.getFieldsValue();s.updateAutoCameraOn(c.autoCameraOn),await i(a(c.roomTitle,c.roomType,N)),u(!1),F(!1)}catch(c){console.error(c),u(!1)}}function P(){F(!1)}function B(){M(y.getFieldsError().every(j=>j.errors.length<=0));const c=y.getFieldsValue();s.updateAutoMicOn(c.autoMicOn),s.updateAutoCameraOn(c.autoCameraOn)}});const Ye=/(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)/i,et=O(function({onJoinRoom:a}){const t=C(),i=te(),d=r.exports.useContext(ne),[s]=x.useForm(),[y,h]=r.exports.useState(!1),[u,w]=r.exports.useState(!1),[F,S]=r.exports.useState(!1),M=r.exports.useRef(null);r.exports.useEffect(()=>{let l=NaN;return u&&(l=window.setTimeout(()=>{M.current&&(M.current.focus(),M.current.select())},0)),()=>{window.clearTimeout(l)}},[u]);const N={roomUUID:"",autoCameraOn:d.autoCameraOn,autoMicOn:d.autoMicOn};return p(Y,{children:[e(oe,{type:"join",onClick:L}),e(X,{cancelText:t("cancel"),footer:[e(R,{onClick:D,children:t("cancel")},"cancel"),e(R,{disabled:!F||s.getFieldValue("roomUUID").trim()==="",loading:y,type:"primary",onClick:m,children:t("join")},"submit")],okText:t("join"),open:u,title:t("home-page-hero-button-type.join"),width:400,wrapClassName:"join-room-box-container",onCancel:D,onOk:m,children:p(x,{className:"main-room-menu-form",form:s,initialValues:N,layout:"vertical",name:"createRoom",onFieldsChange:I,children:[e(x.Item,{label:t("room-uuid"),name:"roomUUID",rules:[{required:!0,message:t("enter-room-uuid")}],children:e(ce,{ref:M,placeholder:t("enter-room-uuid"),onKeyUp:E})}),p(x.Item,{label:t("join-options"),children:[e(x.Item,{noStyle:!0,name:"autoMicOn",valuePropName:"checked",children:e(_,{children:t("turn-on-the-microphone")})}),e(x.Item,{noStyle:!0,name:"autoCameraOn",valuePropName:"checked",children:e(_,{children:t("turn-on-the-camera")})})]})]})})]});async function H(){const l=await navigator.clipboard.readText(),v=Ye.exec(l);return v==null?void 0:v[0]}async function L(){try{const l=await H();l&&me(l)&&Ve(l)===4&&(s.setFieldsValue({roomUUID:l}),S(!0))}catch{}w(!0)}function E(l){l.key==="Enter"&&!l.ctrlKey&&!l.shiftKey&&!l.altKey&&!l.metaKey&&(l.preventDefault(),i(s.validateFields()).then(m))}async function m(){try{await i(s.validateFields())}catch{return}h(!0);try{const l=s.getFieldsValue();d.updateAutoMicOn(l.autoMicOn),d.updateAutoCameraOn(l.autoCameraOn),await i(a(l.roomUUID)),h(!1),w(!1)}catch(l){console.error(l),h(!1)}}function D(){w(!1)}function I(){S(s.getFieldsError().every(v=>v.errors.length<=0));const l=s.getFieldsValue();d.updateAutoMicOn(l.autoMicOn),d.updateAutoCameraOn(l.autoCameraOn)}}),tt=le.memo(function(){const a=ee();return e(oe,{type:"schedule",onClick:()=>a(G.UserScheduledPage)})}),ot=()=>{const n=r.exports.useContext(de),a=r.exports.useContext(Q),t=ee(),i=async s=>{a.isTurnOffDeviceTest||window.isElectron?await ue(s,t):t(G.DevicesTestPage,{roomUUID:s})};return e("div",{className:"main-room-menu-container",children:p(Me,{gutter:16,children:[e($,{span:6,children:e(et,{onJoinRoom:i})}),e($,{span:6,children:e(Qe,{onCreateRoom:d})}),e($,{span:6,children:e(tt,{})})]})});async function d(s,y,h){try{const u=await n.createOrdinaryRoom({title:s,type:y,beginTime:Date.now(),region:h});await i(u)}catch(u){A(u)}}},he=O(function({listRoomsType:a,isLogin:t}){var re;const i=C(),d=r.exports.useContext(de),[s,y]=r.exports.useState(!1),[h,u]=r.exports.useState(),[w,F]=r.exports.useState(!1),[S,M]=r.exports.useState(!1),[N,H]=r.exports.useState(!1),[L,E]=r.exports.useState(!1),[m,D]=r.exports.useState(void 0),I=ee(),l=te(),v=r.exports.useContext(Q),P=a===W.History;r.exports.useEffect(()=>{const o=window.setTimeout(()=>y(!0),200);return()=>window.clearTimeout(o)},[]);const B=r.exports.useCallback(async function(){try{const f=await l(d.listRooms(a,{page:1}));u(f)}catch(f){u([]),A(f)}},[a,d,l]);if(r.exports.useEffect(()=>{if(!t)return;B();const o=window.setInterval(B,30*1e3);return()=>{window.clearInterval(o)}},[B,t]),!h)return s?e(Je,{}):null;if(h.length<=0)return e(We,{isHistory:P});const T=m!=null&&m.periodicUUID?d.periodicRooms.get(m==null?void 0:m.periodicUUID):void 0;return p(Y,{children:[we(h.map(o=>d.rooms.get(o))).map(o=>{if(!o)return null;const f=o.beginTime?new Date(o.beginTime):void 0,U=o.endTime?new Date(o.endTime):void 0,g=V=>{let k;switch(V){case b.Idle:{k=o.ownerUUID===v.userUUID?{key:"begin",text:i("begin"),type:"primary"}:{key:"join",text:i("join"),type:"primary"};break}case b.Started:case b.Paused:{k={key:"join",text:i("join"),type:"primary"};break}case b.Stopped:{k=o.hasRecord?{key:"replay",text:i("replay")}:null;break}default:{k={key:"begin",text:i("begin"),type:"primary"};break}}return k};return e(r.exports.Fragment,{children:e(_e,{beginTime:f,endTime:U,isPeriodic:!!o.periodicUUID,menuActions:xe(o),ownerAvatar:o.ownerAvatarURL,ownerName:o.ownerName,primaryAction:g(o.roomStatus),status:Fe(o.roomStatus),title:o.title,onAction:V=>{switch(V){case"details":{I(G.RoomDetailPage,{roomUUID:o.roomUUID,periodicUUID:o.periodicUUID});break}case"modify":{I(G.ModifyOrdinaryRoomPage,{roomUUID:o.roomUUID,periodicUUID:o.periodicUUID});break}case"cancel":{D(o),F(!0);break}case"invite":{D(o),M(!0);break}case"delete-history":{D(o),H(!0);break}case"replay":{j({ownerUUID:o.ownerUUID,roomUUID:o.roomUUID,roomType:o.roomType||Z.OneToOne});break}case"join":case"begin":{c(o.roomUUID);break}}}})},o.roomUUID)}),e(qe,{}),m&&e(Oe,{cancelModalVisible:w,isCreator:m.ownerUUID===v.userUUID,isPeriodicDetailsPage:!1,periodicUUID:m.periodicUUID,roomUUID:m.roomUUID,onCancel:fe,onCancelRoom:ve}),m&&e(Ne,{baseUrl:De,periodicWeeks:T==null?void 0:T.periodic.weeks,room:m,userName:(re=v.userName)!=null?re:"",visible:S,onCancel:ae,onCopy:ye}),m&&e(Xe,{loading:L,visible:N,onCancel:ie,onConfirm:ge})]});async function c(o){v.isTurnOffDeviceTest||window.isElectron?await ue(o,I):I(G.DevicesTestPage,{roomUUID:o})}function j(o){const{roomUUID:f,ownerUUID:U,roomType:g}=o;window.isElectron?I(G.ReplayPage,{roomType:g,roomUUID:f,ownerUUID:U}):window.open(`/replay/${g}/${f}/${U}/`,"_blank")}function fe(){F(!1)}function ae(){M(!1)}function ie(){H(!1)}async function ye(o){try{await navigator.clipboard.writeText(o),K.success(i("copy-success"))}catch{K.error(i("copy-fail"))}finally{ae()}}async function ve(o){const{ownerUUID:f,roomUUID:U,periodicUUID:g}=m,V=f===v.userUUID;try{!V&&g?await d.cancelRoom({all:!0,periodicUUID:g}):await d.cancelRoom({all:o||!U&&!!g,roomUUID:U,periodicUUID:g}),F(!1),B();const k=i(V?"the-room-has-been-cancelled":"the-room-has-been-removed");K.success(k)}catch(k){console.error(k),A(k)}}async function ge(){E(!0);try{await l(d.cancelRoom({isHistory:!0,roomUUID:m.roomUUID})),ie(),B()}catch(o){console.error(o),A(o)}finally{E(!1)}}function xe(o){const f=[{key:"details",text:i("room-detail")}];if(P)o.roomUUID&&f.push({key:"delete-history",text:i("delete-records")});else{const g=o.ownerUUID===v.userUUID;(o.roomUUID||o.periodicUUID)&&g&&o.roomStatus===b.Idle&&f.push({key:"modify",text:i("modify-room")}),(!g||o.roomStatus===b.Idle)&&f.push({key:"cancel",text:i(g?"cancel-room":"remove-room")}),o.roomUUID&&f.push({key:"invite",text:i("invitation")})}return f}function we(o){return a===W.History?o.sort((f,U)=>f&&U?Number(U.beginTime)-Number(f.beginTime):0):o}function Fe(o){switch(o){case b.Idle:return"upcoming";case b.Started:case b.Paused:return"running";case b.Stopped:return"stopped";default:return"upcoming"}}}),at=O(function({isLogin:a}){const t=C(),[i,d]=r.exports.useState("all"),s=r.exports.useMemo(()=>[{key:"all",title:t("all")},{key:"today",title:t("today")},{key:"periodic",title:t("periodic")}],[t]);return e(pe,{activeTab:i,filters:s,title:t("room-list"),onTabActive:d,children:e(he,{isLogin:a,listRoomsType:i})})}),it=O(function({isLogin:a}){const t=C();return e(pe,{title:t("history"),children:e(he,{isLogin:a,listRoomsType:W.History})})}),yt=O(function(){const a=r.exports.useContext(Ie);r.exports.useEffect(()=>a.configure(),[]);const t=He();return p("div",{className:"homepage-layout-horizontal-container",children:[e(ot,{}),p("div",{className:"homepage-layout-horizontal-content",children:[e(at,{isLogin:t}),e(it,{isLogin:t})]}),e(Ee,{})]})});export{yt as HomePage,yt as default};
//# sourceMappingURL=index.31afd0fd.js.map
