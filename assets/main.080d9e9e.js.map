{"version":3,"file":"main.080d9e9e.js","sources":["../../../../node_modules/.pnpm/@netless+app-dice@0.1.1/node_modules/@netless/app-dice/dist/main.mjs"],"sourcesContent":["function y() {\n}\nfunction v(e) {\n  return document.createElement(e);\n}\nfunction o(e, t) {\n  return e.appendChild(t);\n}\nfunction g(e, t) {\n  return e.classList.add(`netless-app-dice-${t}`), e;\n}\nfunction u(e) {\n  return document.createElementNS(\"http://www.w3.org/2000/svg\", e);\n}\nfunction $(e, t, s) {\n  s == null ? e.removeAttribute(t) : e.getAttribute(t) !== s && e.setAttribute(t, s);\n}\nfunction p(e, t) {\n  for (const s in t)\n    $(e, s, t[s]);\n}\nfunction _(e) {\n  return `rgb(${e[0]}, ${e[1]}, ${e[2]})`;\n}\nfunction S() {\n  const e = u(\"svg\");\n  e.style.display = \"none\", p(e, { width: \"100\", height: \"100\", viewBox: \"0 0 100 100\" });\n  for (let t = 1; t <= 6; t++)\n    o(e, k(t));\n  return e;\n}\nfunction k(e) {\n  const t = u(\"symbol\");\n  return p(t, { id: `dice-face-${e}`, viewBox: \"0 0 100 100\" }), (e === 1 || e === 3 || e === 5) && o(t, i(50, 50)), (e === 2 || e === 3 || e === 4 || e === 5 || e === 6) && (o(t, i(25, 75)), o(t, i(75, 25))), (e === 4 || e === 5 || e === 6) && (o(t, i(25, 25)), o(t, i(75, 75))), e === 6 && (o(t, i(25, 50)), o(t, i(75, 50))), t;\n}\nfunction i(e, t) {\n  const s = u(\"circle\");\n  return p(s, { cx: String(e), cy: String(t), r: \"8\" }), s;\n}\nfunction C(e) {\n  const t = g(v(\"div\"), \"cube\"), s = [];\n  for (let n = 1; n <= 6; ++n) {\n    const r = Y(n, e[n - 1]);\n    s.push(r), o(t, r);\n  }\n  return { $cube: t, $faces: s };\n}\nfunction Y(e, t) {\n  const s = g(g(v(\"div\"), \"face\"), `face-${e}`), n = u(\"svg\");\n  p(n, {\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0 0 100 100\",\n    fill: \"#fff\"\n  });\n  const r = u(\"use\");\n  return p(r, { href: `#dice-face-${t}` }), o(n, r), o(s, n), s;\n}\nfunction L(e) {\n  const t = g(v(\"div\"), \"container\"), s = S();\n  o(t, s);\n  const { $cube: n, $faces: r } = C(e);\n  o(t, n);\n  const d = \"netless-app-dice-reset\", a = \"netless-app-dice-activate\";\n  function l() {\n    n.classList.remove(a), n.classList.add(d);\n  }\n  function c() {\n    n.classList.remove(d), n.classList.add(a);\n  }\n  function h(f, b) {\n    const x = r[f].querySelector(\"svg use\");\n    $(x, \"href\", `#dice-face-${b}`);\n  }\n  let m = \"\";\n  function w(f) {\n    m !== f && (m = f, r.forEach((b) => {\n      b.style.backgroundColor = f;\n    }));\n  }\n  return { $container: t, $symbols: s, $cube: n, $faces: r, reset: l, activate: c, set_face: h, set_color: w };\n}\nconst X = `.netless-app-dice-container{width:100%;height:100%;overflow:hidden;display:flex;align-items:center;justify-content:center;perspective:800px;user-select:none;-webkit-user-select:none}.netless-app-dice-cube{display:inline-block;width:100px;height:100px;transform-style:preserve-3d;transform-origin:center;position:relative;cursor:pointer}.netless-app-dice-reset{animation:netless-app-dice-anti-rotate .1s paused}.netless-app-dice-activate{animation:netless-app-dice-rotate 3s running;cursor:not-allowed}.netless-app-dice-face{width:100%;height:100%;border:1px solid;overflow:hidden;position:absolute;transform-origin:0 0;background-color:#68ab5d;transform-style:preserve-3d;backface-visibility:hidden}.netless-app-dice-face-1{transform:translateZ(50px)}.netless-app-dice-face-2{left:100px;transform:translateZ(-50px) rotateY(180deg)}.netless-app-dice-face-3{transform:rotateY(-90deg) translate(-50px)}.netless-app-dice-face-4{left:100px;transform:rotateY(90deg) translate(-50px)}.netless-app-dice-face-5{top:100px;transform:rotateX(-90deg) translateY(-50px)}.netless-app-dice-face-6{transform:rotateX(90deg) translateY(-50px)}@keyframes netless-app-dice-rotate{0%{transform:rotateX(0) rotateY(0) rotate(0)}to{transform:rotateX(1080deg) rotateY(-720deg) rotate(0)}}@keyframes netless-app-dice-anti-rotate{0%{transform:rotateX(1080deg) rotateY(-720deg) rotate(0)}to{transform:rotateX(0) rotateY(0) rotate(0)}}\n`, A = {\n  kind: \"Dice\",\n  setup(e) {\n    const t = /* @__PURE__ */ new Set(), s = e.createStorage(\"faces\"), n = L(s.state.value || [1, 2, 3, 4, 5, 6]);\n    n.$cube.onclick = function() {\n      var c;\n      if (n.$cube.classList.contains(\"netless-app-dice-activate\"))\n        return;\n      const l = (c = e.currentMember) == null ? void 0 : c.memberState.strokeColor;\n      s.setState({\n        value: E([1, 2, 3, 4, 5, 6]),\n        color: l ? _(l) : \"\"\n      });\n    };\n    let r = y;\n    function d() {\n      r(), t.delete(r), n.activate(), n.set_color(s.state.color || \"\");\n      const a = setTimeout(() => {\n        const c = s.state.value;\n        !c || c.forEach((h, m) => n.set_face(m, h));\n      }, 1e3), l = setTimeout(n.reset, 3010);\n      r = () => {\n        clearTimeout(l), clearTimeout(a), n.reset();\n      }, t.add(r);\n    }\n    t.add(s.on(\"stateChanged\", d)), e.box.mountStyles(X), e.box.mountContent(n.$container), e.emitter.on(\"destroy\", () => {\n      t.forEach((a) => a());\n    });\n  }\n};\nfunction E(e) {\n  for (let t = e.length - 1; t > 0; t--) {\n    const s = Math.floor(Math.random() * (t + 1));\n    [e[t], e[s]] = [e[s], e[t]];\n  }\n  return e;\n}\nexport {\n  A as default\n};\n//# sourceMappingURL=main.mjs.map\n"],"names":["v","e","t","u","$","s","p","_","k","i","C","n","r","Y","L","d","l","c","f","b","x","w","X","E"],"mappings":"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"}