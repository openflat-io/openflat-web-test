var vt=Object.defineProperty;var yt=(a,e,r)=>e in a?vt(a,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[e]=r;var g=(a,e,r)=>(yt(a,typeof e!="symbol"?e+"":e,r),r);import{k,s as le,q as s,m as C,aB as ne,aK as wt,aE as oe,w as bt,a0 as kt,x as R,l as L,a8 as Ct,t as St,a9 as xt,a5 as Tt,a7 as Te,cD as me,_ as Ut,n as $,M as He,X as Pt,cE as Ft,cF as Dt,cG as Nt,cH as Mt,ab as Y,aL as Ot,cI as It,aZ as V,az as Ve,A as E,F as j,b2 as Ze,aT as P,bm as We,bv as Et,c3 as Rt,cJ as At,b8 as de,cK as Ue,c4 as F,cL as qe,cM as _,c6 as O,v as jt,c5 as Ke,cN as Pe,bk as _t,cO as zt,cP as pe,cQ as $t,c9 as N,S as Bt,d as Ye,cq as Xe,cR as Fe,bl as z,b3 as re,cS as Gt,cT as Lt,cy as De,cr as Ht,cU as Vt}from"./index.43c4ffc0.js";import{S as ae}from"./Skeleton.b37802c7.js";import{T as Zt}from"./Table.77c4b21e.js";import{C as Wt}from"./CSSTransition.a4d82697.js";import{e as ee}from"./routes.73fc4946.js";import{H as Ne}from"./isEqual.5ca85d66.js";var qt=globalThis&&globalThis.__rest||function(a,e){var r={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(r[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(a);i<t.length;i++)e.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(a,t[i])&&(r[t[i]]=a[t[i]]);return r},Qe=function(e){var r=e.prefixCls,t=e.separator,i=t===void 0?"/":t,o=e.children,n=e.overlay,c=e.dropdownProps,u=qt(e,["prefixCls","separator","children","overlay","dropdownProps"]),d=k.exports.useContext(le),h=d.getPrefixCls,p=h("breadcrumb",r),l=function(S){return n?s(ne,{overlay:n,placement:"bottom",...c,children:C("span",{className:"".concat(p,"-overlay-link"),children:[S,s(wt,{})]})}):S},f;return"href"in u?f=s("a",{className:"".concat(p,"-link"),...u,children:o}):f=s("span",{className:"".concat(p,"-link"),...u,children:o}),f=l(f),o?C("li",{children:[f,i&&s("span",{className:"".concat(p,"-separator"),children:i})]}):null};Qe.__ANT_BREADCRUMB_ITEM=!0;const Je=Qe;var et=function(e){var r=e.children,t=k.exports.useContext(le),i=t.getPrefixCls,o=i("breadcrumb");return s("span",{className:"".concat(o,"-separator"),children:r||"/"})};et.__ANT_BREADCRUMB_SEPARATOR=!0;const Kt=et;var Yt=globalThis&&globalThis.__rest||function(a,e){var r={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(r[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(a);i<t.length;i++)e.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(a,t[i])&&(r[t[i]]=a[t[i]]);return r};function Xt(a,e){if(!a.breadcrumbName)return null;var r=Object.keys(e).join("|"),t=a.breadcrumbName.replace(new RegExp(":(".concat(r,")"),"g"),function(i,o){return e[o]||i});return t}function Qt(a,e,r,t){var i=r.indexOf(a)===r.length-1,o=Xt(a,e);return i?s("span",{children:o}):s("a",{href:"#/".concat(t.join("/")),children:o})}var tt=function(e,r){return e=(e||"").replace(/^\//,""),Object.keys(r).forEach(function(t){e=e.replace(":".concat(t),r[t])}),e},Jt=function(e,r,t){var i=Ct(e),o=tt(r||"",t);return o&&i.push(o),i},be=function(e){var r=e.prefixCls,t=e.separator,i=t===void 0?"/":t,o=e.style,n=e.className,c=e.routes,u=e.children,d=e.itemRender,h=d===void 0?Qt:d,p=e.params,l=p===void 0?{}:p,f=Yt(e,["prefixCls","separator","style","className","routes","children","itemRender","params"]),v=k.exports.useContext(le),S=v.getPrefixCls,m=v.direction,y,w=S("breadcrumb",r);if(c&&c.length>0){var U=[];y=c.map(function(T){var b=tt(T.path,l);b&&U.push(b);var D;return T.children&&T.children.length&&(D=s(oe,{items:T.children.map(function(x){return{key:x.path||x.breadcrumbName,label:h(x,l,c,Jt(U,x.path,l))}})})),s(Je,{overlay:D,separator:i,children:h(T,l,c,U)},b||T.breadcrumbName)})}else u&&(y=bt(u).map(function(T,b){return T&&kt(T,{separator:i,key:b})}));var M=R(w,L({},"".concat(w,"-rtl"),m==="rtl"),n);return s("nav",{className:M,style:o,...f,children:s("ol",{children:y})})};be.Item=Je;be.Separator=Kt;const J=be;var er={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},tr=function(){var e=k.exports.useRef([]),r=k.exports.useRef(null);return k.exports.useEffect(function(){var t=Date.now(),i=!1;e.current.forEach(function(o){if(!!o){i=!0;var n=o.style;n.transitionDuration=".3s, .3s, .3s, .06s",r.current&&t-r.current<100&&(n.transitionDuration="0s, 0s")}}),i&&(r.current=Date.now())}),e.current},Me=0,rr=xt();function ar(){var a;return rr?(a=Me,Me+=1):a="TEST_OR_SSR",a}const ir=function(a){var e=k.exports.useState(),r=St(e,2),t=r[0],i=r[1];return k.exports.useEffect(function(){i("rc_progress_".concat(ar()))},[]),a||t};var sr=["id","prefixCls","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function Oe(a){return+a.replace("%","")}function Ie(a){var e=a!=null?a:[];return Array.isArray(e)?e:[e]}var W=100,Ee=function(e,r,t,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,n=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,d=o>0?90+o/2:-90,h=Math.PI*2*e,p=h*((360-o)/360),l=r/100*360*((360-o)/360),f=o===0?0:{bottom:0,top:180,left:90,right:-90}[n],v=(100-t)/100*p;return c==="round"&&t!==100&&(v+=u/2,v>=p&&(v=p-.01)),{stroke:typeof i=="string"?i:void 0,strokeDasharray:"".concat(p,"px ").concat(h),strokeDashoffset:v,transform:"rotate(".concat(d+l+f,"deg)"),transformOrigin:"50% 50%",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},ke=function(e){var r=e.id,t=e.prefixCls,i=e.strokeWidth,o=e.trailWidth,n=e.gapDegree,c=e.gapPosition,u=e.trailColor,d=e.strokeLinecap,h=e.style,p=e.className,l=e.strokeColor,f=e.percent,v=Tt(e,sr),S=ir(r),m="".concat(S,"-gradient"),y=W/2-i/2,w=Ee(y,0,100,u,n,c,d,i),U=Ie(f),M=Ie(l),T=M.find(function(x){return x&&Te(x)==="object"}),b=tr(),D=function(){var I=0;return U.map(function(G,B){var Z=M[B]||M[M.length-1],A=Z&&Te(Z)==="object"?"url(#".concat(m,")"):void 0,X=Ee(y,I,G,Z,n,c,d,i);return I+=G,s("circle",{className:"".concat(t,"-circle-path"),r:y,cx:W/2,cy:W/2,stroke:A,strokeLinecap:d,strokeWidth:i,opacity:G===0?0:1,style:X,ref:function(he){b[B]=he}},B)}).reverse()};return C("svg",{className:R("".concat(t,"-circle"),p),viewBox:"0 0 ".concat(W," ").concat(W),style:h,id:r,...v,children:[T&&s("defs",{children:s("linearGradient",{id:m,x1:"100%",y1:"0%",x2:"0%",y2:"0%",children:Object.keys(T).sort(function(x,I){return Oe(x)-Oe(I)}).map(function(x,I){return s("stop",{offset:x,stopColor:T[x]},I)})})}),s("circle",{className:"".concat(t,"-circle-trail"),r:y,cx:W/2,cy:W/2,stroke:u,strokeLinecap:d,strokeWidth:o||i,style:w}),D()]})};ke.defaultProps=er;ke.displayName="Circle";function K(a){return!a||a<0?0:a>100?100:a}function ce(a){var e=a.success,r=a.successPercent,t=r;return e&&"progress"in e&&(t=e.progress),e&&"percent"in e&&(t=e.percent),t}function nr(a){var e=a.percent,r=a.success,t=a.successPercent,i=K(ce({success:r,successPercent:t}));return[i,K(K(e)-i)]}function or(a){var e=a.success,r=e===void 0?{}:e,t=a.strokeColor,i=r.strokeColor;return[i||me.green,t||null]}var cr=function(e){var r=e.prefixCls,t=e.width,i=e.strokeWidth,o=e.trailColor,n=o===void 0?null:o,c=e.strokeLinecap,u=c===void 0?"round":c,d=e.gapPosition,h=e.gapDegree,p=e.type,l=e.children,f=e.success,v=t||120,S={width:v,height:v,fontSize:v*.15+6},m=i||6,y=d||p==="dashboard"&&"bottom"||void 0,w=function(){if(h||h===0)return h;if(p==="dashboard")return 75},U=Object.prototype.toString.call(e.strokeColor)==="[object Object]",M=or({success:f,strokeColor:e.strokeColor}),T=R("".concat(r,"-inner"),L({},"".concat(r,"-circle-gradient"),U));return C("div",{className:T,style:S,children:[s(ke,{percent:nr(e),strokeWidth:m,trailWidth:m,strokeColor:M,strokeLinecap:u,trailColor:n,prefixCls:r,gapDegree:w(),gapPosition:y}),l]})};const lr=cr;var dr=globalThis&&globalThis.__rest||function(a,e){var r={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(r[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(a);i<t.length;i++)e.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(a,t[i])&&(r[t[i]]=a[t[i]]);return r},ur=function(e){var r=[];return Object.keys(e).forEach(function(t){var i=parseFloat(t.replace(/%/g,""));isNaN(i)||r.push({key:i,value:e[t]})}),r=r.sort(function(t,i){return t.key-i.key}),r.map(function(t){var i=t.key,o=t.value;return"".concat(o," ").concat(i,"%")}).join(", ")},hr=function(e,r){var t=e.from,i=t===void 0?me.blue:t,o=e.to,n=o===void 0?me.blue:o,c=e.direction,u=c===void 0?r==="rtl"?"to left":"to right":c,d=dr(e,["from","to","direction"]);if(Object.keys(d).length!==0){var h=ur(d);return{backgroundImage:"linear-gradient(".concat(u,", ").concat(h,")")}}return{backgroundImage:"linear-gradient(".concat(u,", ").concat(i,", ").concat(n,")")}},pr=function(e){var r=e.prefixCls,t=e.direction,i=e.percent,o=e.strokeWidth,n=e.size,c=e.strokeColor,u=e.strokeLinecap,d=u===void 0?"round":u,h=e.children,p=e.trailColor,l=p===void 0?null:p,f=e.success,v=c&&typeof c!="string"?hr(c,t):{background:c},S=d==="square"||d==="butt"?0:void 0,m={backgroundColor:l||void 0,borderRadius:S},y=Ut({width:"".concat(K(i),"%"),height:o||(n==="small"?6:8),borderRadius:S},v),w=ce(e),U={width:"".concat(K(w),"%"),height:o||(n==="small"?6:8),borderRadius:S,backgroundColor:f==null?void 0:f.strokeColor},M=w!==void 0?s("div",{className:"".concat(r,"-success-bg"),style:U}):null;return C($,{children:[s("div",{className:"".concat(r,"-outer"),children:C("div",{className:"".concat(r,"-inner"),style:m,children:[s("div",{className:"".concat(r,"-bg"),style:y}),M]})}),h]})};const fr=pr;var gr=function(e){for(var r=e.size,t=e.steps,i=e.percent,o=i===void 0?0:i,n=e.strokeWidth,c=n===void 0?8:n,u=e.strokeColor,d=e.trailColor,h=d===void 0?null:d,p=e.prefixCls,l=e.children,f=Math.round(t*(o/100)),v=r==="small"?2:14,S=new Array(t),m=0;m<t;m++){var y=Array.isArray(u)?u[m]:u;S[m]=s("div",{className:R("".concat(p,"-steps-item"),L({},"".concat(p,"-steps-item-active"),m<=f-1)),style:{backgroundColor:m<=f-1?y:h,width:v,height:c}},m)}return C("div",{className:"".concat(p,"-steps-outer"),children:[S,l]})};const mr=gr;var vr=globalThis&&globalThis.__rest||function(a,e){var r={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(r[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(a);i<t.length;i++)e.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(a,t[i])&&(r[t[i]]=a[t[i]]);return r};He("line","circle","dashboard");var yr=He("normal","exception","active","success"),wr=function(e){var r,t=e.prefixCls,i=e.className,o=e.steps,n=e.strokeColor,c=e.percent,u=c===void 0?0:c,d=e.size,h=d===void 0?"default":d,p=e.showInfo,l=p===void 0?!0:p,f=e.type,v=f===void 0?"line":f,S=vr(e,["prefixCls","className","steps","strokeColor","percent","size","showInfo","type"]);function m(){var A=ce(e);return parseInt(A!==void 0?A.toString():u.toString(),10)}function y(){var A=e.status;return yr.indexOf(A)<0&&m()>=100?"success":A||"normal"}function w(A,X){var ue=e.format,he=ce(e);if(!l)return null;var Q,gt=ue||function(mt){return"".concat(mt,"%")},xe=v==="line";return ue||X!=="exception"&&X!=="success"?Q=gt(K(u),K(he)):X==="exception"?Q=xe?s(Ft,{}):s(Dt,{}):X==="success"&&(Q=xe?s(Nt,{}):s(Mt,{})),s("span",{className:"".concat(A,"-text"),title:typeof Q=="string"?Q:void 0,children:Q})}var U=k.exports.useContext(le),M=U.getPrefixCls,T=U.direction,b=M("progress",t),D=y(),x=w(b,D),I=Array.isArray(n)?n[0]:n,G=typeof n=="string"||Array.isArray(n)?n:void 0,B;v==="line"?B=o?s(mr,{...e,strokeColor:G,prefixCls:b,steps:o,children:x}):s(fr,{...e,strokeColor:I,prefixCls:b,direction:T,children:x}):(v==="circle"||v==="dashboard")&&(B=s(lr,{...e,strokeColor:I,prefixCls:b,progressStatus:D,children:x}));var Z=R(b,(r={},L(r,"".concat(b,"-").concat(v==="dashboard"&&"circle"||o&&"steps"||v),!0),L(r,"".concat(b,"-status-").concat(D),!0),L(r,"".concat(b,"-show-info"),l),L(r,"".concat(b,"-").concat(h),h),L(r,"".concat(b,"-rtl"),T==="rtl"),r),i);return s("div",{...Pt(S,["status","format","trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"]),className:Z,children:B})};const br=wr,kr=({active:a,className:e="",...r})=>C("svg",{className:`${e} flat-icon ${a?"is-active":""}`,fill:"none",height:"50",viewBox:"0 0 50 50",width:"50",xmlns:"http://www.w3.org/2000/svg",...r,children:[s("rect",{height:"50",width:"50"}),s("circle",{cx:"13",cy:"25",fill:"#3381FF",r:"2"}),s("circle",{cx:"25",cy:"25",fill:"#3381FF",r:"4"}),s("circle",{cx:"37",cy:"25",fill:"#3381FF",r:"2"})]}),Cr="data:image/svg+xml;charset=utf8,%3csvg width='124' height='124' xmlns='http://www.w3.org/2000/svg'%3e%3cdefs%3e%3clinearGradient x1='100%25' y1='50%25' x2='0%25' y2='50%25' id='a'%3e%3cstop stop-color='%237A7B7C' stop-opacity='0' offset='0%25'/%3e%3cstop stop-color='%237A7B7C' offset='100%25'/%3e%3c/linearGradient%3e%3c/defs%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath fill='white' opacity='.01' d='M0 0h124v124H0z'/%3e%3cpath stroke='%237A7B7C' d='M31.464 110.196 28.6 109.5l2.132-2.035.697-2.864 2.035 2.132 2.864.697-2.132 2.035-.697 2.864zM92 21h8m-4-4v8'/%3e%3cpath fill='url(%23a)' opacity='.1' d='M32 80V22h25.943L64 30l30-.09V80z'/%3e%3cpath stroke='%237A7B7C' stroke-width='2' d='M92 95H22V29h28l7 9h35v7'/%3e%3cpath stroke='%237A7B7C' stroke-width='2' d='m26.321 75.122 2.253-10.36L32 49h70L92 95H22'/%3e%3c/g%3e%3c/svg%3e",Sr=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],xr=["B","kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Tr=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Ur=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Re=(a,e,r)=>{let t=a;return typeof e=="string"||Array.isArray(e)?t=a.toLocaleString(e,r):(e===!0||r!==void 0)&&(t=a.toLocaleString(void 0,r)),t};function rt(a,e){if(!Number.isFinite(a))throw new TypeError(`Expected a finite number, got ${typeof a}: ${a}`);e={bits:!1,binary:!1,...e};const r=e.bits?e.binary?Ur:Tr:e.binary?xr:Sr;if(e.signed&&a===0)return` 0 ${r[0]}`;const t=a<0,i=t?"-":e.signed?"+":"";t&&(a=-a);let o;if(e.minimumFractionDigits!==void 0&&(o={minimumFractionDigits:e.minimumFractionDigits}),e.maximumFractionDigits!==void 0&&(o={maximumFractionDigits:e.maximumFractionDigits,...o}),a<1){const d=Re(a,e.locale,o);return i+d+" "+r[0]}const n=Math.min(Math.floor(e.binary?Math.log(a)/Math.log(1024):Math.log10(a)/3),r.length-1);a/=(e.binary?1024:1e3)**n,o||(a=a.toPrecision(3));const c=Re(Number(a),e.locale,o),u=r[n];return i+c+" "+u}const Pr=Y.memo(function(e){const{className:r,...t}=e;return s(Ot,{...t,className:R(r,"cloud-storage-file-list-help"),children:s(It,{})})}),Fr="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M5.052 12.059a1.135 1.135 0 0 0 .784-.303 1.033 1.033 0 0 0 .303-.765 1.02 1.02 0 0 0-.303-.748c-.214-.214-.463-.303-.784-.303-.302 0-.552.089-.748.303a.97.97 0 0 0-.32.748c0 .302.107.552.32.765.196.196.446.303.748.303Zm5.948 0a1.135 1.135 0 0 0 .784-.303 1.033 1.033 0 0 0 .303-.765 1.02 1.02 0 0 0-.303-.748A1.06 1.06 0 0 0 11 9.94a1.02 1.02 0 0 0-.765.303c-.214.196-.303.445-.303.748s.089.552.303.765a1.091 1.091 0 0 0 .765.303Zm5.93 0a1.091 1.091 0 0 0 .766-.303.982.982 0 0 0 .32-.765.97.97 0 0 0-.32-.748 1.02 1.02 0 0 0-.766-.303 1.02 1.02 0 0 0-.765.303c-.214.196-.303.445-.303.748s.089.552.303.765a1.091 1.091 0 0 0 .765.303Z' fill='%23444E60'/%3e%3c/svg%3e",Dr="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='M2 3a3 3 0 0 1 3-3h9l8 8v13a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V3Z' fill='url(%23a)'/%3e%3cpath d='m14 0 8 8h-5a3 3 0 0 1-3-3V0Z' fill='url(%23b)'/%3e%3cdefs%3e%3clinearGradient id='a' x1='14' y1='-4' x2='14' y2='24' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23F8F8F8'/%3e%3cstop offset='1' stop-color='%23DCDCDC'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='18.8' y1='-1.333' x2='18.8' y2='8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23ECECEC'/%3e%3cstop offset='1' stop-color='%23CFCFCF'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Nr="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='M2 3a3 3 0 0 1 3-3h9l8 8v13a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V3Z' fill='url(%23a)'/%3e%3cpath d='m14 0 8 8h-5a3 3 0 0 1-3-3V0Z' fill='url(%23b)'/%3e%3cpath opacity='.01' d='M2 4h20v20H2V4Z' fill='%235D6066'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='m12 10 4-1v2l-3 .75V17h-.05a2.5 2.5 0 1 1-.95-2.5V10Z' fill='white'/%3e%3cdefs%3e%3clinearGradient id='a' x1='14' y1='-4' x2='14' y2='24' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%238CF79C'/%3e%3cstop offset='1' stop-color='%2303CF22'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='18.8' y1='-1.333' x2='18.8' y2='8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2378FF8D'/%3e%3cstop offset='1' stop-color='%2303CA22'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Mr="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='M2 3a3 3 0 0 1 3-3h9l8 8v13a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V3Z' fill='url(%23a)'/%3e%3cpath d='m14 0 8 8h-5a3 3 0 0 1-3-3V0Z' fill='url(%23b)'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.5 13a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm4.5-1 3 7H7l2-4 3 1 2-4Z' fill='white'/%3e%3cdefs%3e%3clinearGradient id='a' x1='14' y1='-4' x2='14' y2='24' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2392E5FF'/%3e%3cstop offset='1' stop-color='%2300ACE2'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='18.8' y1='-1.333' x2='18.8' y2='8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2392E5FF'/%3e%3cstop offset='1' stop-color='%2300ACE2'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Or="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='M2 3a3 3 0 0 1 3-3h9l8 8v13a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V3Z' fill='url(%23a)'/%3e%3cpath d='M16.359 17.96a4.264 4.264 0 0 1-2.473-1.003c-1.37.3-2.673.735-3.976 1.27C8.874 20.064 7.905 21 7.07 21c-.168 0-.368-.033-.502-.134A.985.985 0 0 1 6 19.964c0-.3.067-1.136 3.241-2.506a23.785 23.785 0 0 0 1.771-4.144c-.4-.802-1.27-2.773-.668-3.776.2-.367.602-.568 1.036-.534.334 0 .668.167.869.434.434.601.4 1.871-.167 3.743a10.08 10.08 0 0 0 2.071 2.673c.702-.134 1.404-.234 2.106-.234 1.57.033 1.804.769 1.77 1.203 0 1.136-1.102 1.136-1.67 1.136Zm-9.357 2.07.1-.033c.469-.167.836-.5 1.103-.935a2.64 2.64 0 0 0-1.203.969Zm4.445-10.024h-.1c-.034 0-.1 0-.134.034-.134.568-.033 1.17.2 1.704.2-.568.2-1.17.034-1.738Zm.234 4.845-.034.067-.033-.033c-.3.768-.635 1.537-1.003 2.272l.067-.033v.067a19.445 19.445 0 0 1 2.273-.669l-.034-.033h.1c-.5-.501-.969-1.07-1.336-1.638Zm4.544 1.771c-.3 0-.568 0-.869.067a2.8 2.8 0 0 0 1.003.268c.234.033.468 0 .668-.067 0-.1-.133-.268-.802-.268Z' fill='white'/%3e%3cpath d='m14 0 8 8h-5a3 3 0 0 1-3-3V0Z' fill='url(%23b)'/%3e%3cdefs%3e%3clinearGradient id='a' x1='14' y1='-4' x2='14' y2='24' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FF8989'/%3e%3cstop offset='1' stop-color='%23CE0000'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='18.8' y1='-1.333' x2='18.8' y2='8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FF8989'/%3e%3cstop offset='1' stop-color='%23CE0000'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ir="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='M2 3a3 3 0 0 1 3-3h9l8 8v13a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V3Z' fill='url(%23a)'/%3e%3cpath d='m14 0 8 8h-5a3 3 0 0 1-3-3V0Z' fill='url(%23b)'/%3e%3cpath d='M9 11h4a2 2 0 1 1 0 4h-2m0-4v8m-2 0h4' stroke='white' stroke-width='1.5' stroke-linejoin='round'/%3e%3cdefs%3e%3clinearGradient id='a' x1='14' y1='-4' x2='14' y2='24' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFDA89'/%3e%3cstop offset='1' stop-color='%23F9AA00'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='22' y1='0' x2='14' y2='8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFCD5F'/%3e%3cstop offset='1' stop-color='%23F90'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Er="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='M2 3a3 3 0 0 1 3-3h9l8 8v13a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V3Z' fill='url(%23a)'/%3e%3cpath d='m14 0 8 8h-5a3 3 0 0 1-3-3V0Z' fill='url(%23b)'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M8 13a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-1l2 1v-4l-2 1v-1a1 1 0 0 0-1-1H8Z' fill='white'/%3e%3cdefs%3e%3clinearGradient id='a' x1='14' y1='-4' x2='14' y2='24' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2391CBFF'/%3e%3cstop offset='1' stop-color='%230285F9'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='18.8' y1='-1.333' x2='18.8' y2='8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2366B7FF'/%3e%3cstop offset='1' stop-color='%230285F9'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Rr="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='M2 3a3 3 0 0 1 3-3h9l8 8v13a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V3Z' fill='url(%23a)'/%3e%3cpath d='m14 0 8 8h-5a3 3 0 0 1-3-3V0Z' fill='url(%23b)'/%3e%3cpath d='m8 12 2 7 2-5 2 5 2-7' stroke='white' stroke-width='1.5' stroke-linejoin='bevel'/%3e%3cpath d='M7 12h2m6 0h2' stroke='white' stroke-width='1.5' stroke-linejoin='round'/%3e%3cdefs%3e%3clinearGradient id='a' x1='14' y1='-4' x2='14' y2='24' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2356A4FF'/%3e%3cstop offset='1' stop-color='%230256F9'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='18.8' y1='-1.333' x2='18.8' y2='8' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%2356A4FF'/%3e%3cstop offset='1' stop-color='%230256F9'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ar="data:image/svg+xml;charset=utf8,%3csvg width='9' height='9' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M1 4.5A3.5 3.5 0 1 0 4.5 1' stroke='%233381FF' fill='none'/%3e%3c/svg%3e",jr="data:image/svg+xml;charset=utf8,%3csvg width='9' height='9' xmlns='http://www.w3.org/2000/svg'%3e%3cg transform='translate(1 1)' stroke='%23F45454' fill='none' fill-rule='evenodd'%3e%3ccircle cx='3.5' cy='3.5' r='3.5'/%3e%3cpath d='m1 6 5-5'/%3e%3c/g%3e%3c/svg%3e",_r="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M23 19a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V5a3 3 0 0 1 3-3h2.757a3 3 0 0 1 2.122.879L10 4h10a3 3 0 0 1 3 3v12Z' fill='url(%23a)'/%3e%3cpath d='M3 7a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v1H3V7Z' fill='white'/%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M23 19a3 3 0 0 1-3 3H4a3 3 0 0 1-3-3V9a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v10Z' fill='url(%23b)'/%3e%3cdefs%3e%3clinearGradient id='a' x1='11.8' y1='1.333' x2='11.8' y2='22' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFB81D'/%3e%3cstop offset='1' stop-color='%23EFA400'/%3e%3c/linearGradient%3e%3clinearGradient id='b' x1='11.8' y1='6.25' x2='11.8' y2='20.25' gradientUnits='userSpaceOnUse'%3e%3cstop stop-color='%23FFDA89'/%3e%3cstop offset='1' stop-color='%23F9AA00'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",at="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m5 11 5 4 7-8' stroke='%237A7B7C' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e",it="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m6.757 6.757 8.486 8.486m0-8.486-8.486 8.486' stroke='%237A7B7C' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e",st=a=>/\\|\//.test(a),zr=Y.memo(function({fileUUID:e,fileName:r,fileResourceType:t,onRename:i}){const o=V(),n=k.exports.useRef(),[c,u]=$r(r,t),[d,h]=k.exports.useState(c),p=i&&(()=>i(e)),l=i&&(()=>{const f=d+u;!d||f===r?i(e):t===j.Directory?st(d)?Ze.error(o("invalid-directory-name-tips")):i(e,{name:d,ext:u,fullName:f}):i(e,{name:d,ext:u,fullName:f})});return k.exports.useEffect(()=>{const f=n.current;f&&(f.focus(),f.select())},[]),C($,{children:[s(Ve,{ref:n,className:"cloud-storage-file-title-rename-input",size:"small",value:d,onChange:f=>h(f.currentTarget.value),onPressEnter:l}),s(E,{className:"cloud-storage-file-title-rename-btn",shape:"circle",size:"small",type:"text",onClick:l,children:s("img",{alt:"confirm",height:22,src:at,width:22})}),s(E,{className:"cloud-storage-file-title-rename-btn",shape:"circle",size:"small",type:"text",onClick:p,children:s("img",{alt:"cancel",height:22,src:it,width:22})})]})});function $r(a,e){if(e===j.Directory)return[a,""];const r=a.lastIndexOf(".");return[a.substr(0,r),a.slice(r)]}const Br=Y.memo(function({parentDirectoryPath:e,onNewDirectory:r}){const t=V(),i=k.exports.useRef(),[o,n]=k.exports.useState(t("new-directory")),c=r&&(()=>r({directoryName:"",parentDirectoryPath:e})),u=r&&(()=>{st(o)?Ze.error(t("invalid-directory-name-tips")):r({directoryName:o,parentDirectoryPath:e})});return k.exports.useEffect(()=>{const d=i.current;d&&(d.focus(),d.select())},[]),C($,{children:[s(Ve,{ref:i,className:"cloud-storage-file-title-rename-input",size:"small",value:o,onChange:d=>n(d.currentTarget.value),onPressEnter:u}),s(E,{className:"cloud-storage-file-title-rename-btn",shape:"circle",size:"small",type:"text",onClick:u,children:s("img",{alt:"confirm",height:22,src:at,width:22})}),s(E,{className:"cloud-storage-file-title-rename-btn",shape:"circle",size:"small",type:"text",onClick:c,children:s("img",{alt:"cancel",height:22,src:it,width:22})})]})}),nt=Y.memo(function({fileUUID:e,fileName:r,convertStatus:t,titleClickable:i=!1,onTitleClick:o,renamingFileUUID:n,onRename:c,onNewDirectoryFile:u,resourceType:d,parentDirectoryPath:h,...p}){const l=V(),f=t===P.Converting,v=!f&&t===P.Failed,S=k.exports.useMemo(()=>Gr(r),[r]),m=We(),y=w=>{const U=new URLSearchParams({path:w}).toString();m.push({search:U})};return C("span",{title:`${v?l("transcoding-failure"):f?l("transcoding-in-progress"):""}${r}`,...p,className:R(p.className,"cloud-storage-file-title",{"is-convert-ready":!f&&!v}),children:[C("span",{className:"cloud-storage-file-title-icon-wrap",children:[s("img",{"aria-hidden":!0,className:"cloud-storage-file-title-icon",height:22,src:S,width:22}),f?s("img",{"aria-hidden":!0,className:"cloud-storage-file-title-converting",height:11,src:Ar,width:11}):v?s("img",{"aria-hidden":!0,className:"cloud-storage-file-title-convert-error",height:11,src:jr,width:11}):null]}),h&&d===j.Directory&&e==="temporaryDirectory"&&s(Br,{parentDirectoryPath:h,onNewDirectory:u}),n===e?s(zr,{fileName:r,fileResourceType:d,fileUUID:e,onRename:c}):i?s("a",{className:"cloud-storage-file-title-content",onClick:w=>{w.preventDefault(),o&&o(e,y)},children:r}):s("span",{className:"cloud-storage-file-title-content",children:r})]})});function Gr(a){switch((/\.[a-z1-9]+$/i.exec(a)||[""])[0].toLowerCase()){case".ppt":case".pptx":return Ir;case".doc":case".docx":return Rr;case".pdf":return Or;case".jpg":case".png":case".gif":case".jpeg":case".svg":case".bmp":case".eps":return Mr;case".mp4":case".avi":case".mov":case".wmv":case".3gp":case".mkv":case".flv":case".f4v":case".rmvb":case".webm":return Er;case".aac":case".mp3":case".wave":case".wma":case".flac":return Nr;case"":return _r;default:return Dr}}const Lr=Y.memo(function({file:e,index:r,titleClickable:t,renamingFileUUID:i,parentDirectoryPath:o,getPopupContainer:n,fileMenus:c,onItemMenuClick:u,onItemTitleClick:d,onRename:h,onNewDirectoryFile:p}){var m,y;const l=c&&c(e,r),f=((m=e.meta.whiteboardConvert)==null?void 0:m.convertStep)||((y=e.meta.whiteboardProjector)==null?void 0:y.convertStep),v=We(),S=w=>{const U=new URLSearchParams({path:w}).toString();v.push({search:U})};return C("div",{className:"cloud-storage-file-list-filename-container",children:[s(nt,{convertStatus:f,fileName:e.fileName,fileUUID:e.fileUUID,parentDirectoryPath:o,renamingFileUUID:i,resourceType:e.resourceType,titleClickable:t,onNewDirectoryFile:p,onRename:h,onTitleClick:d}),l&&l.length>0&&s("div",{className:"cloud-storage-file-list-menu-btn-wrap",children:s(ne,{className:"cloud-storage-file-list-menu-btn",getPopupContainer:n,overlay:s(oe,{items:l.map(w=>({key:w.key,className:w.className,label:w.name})),onClick:({key:w})=>u==null?void 0:u(e.fileUUID,w,S)}),overlayClassName:"cloud-storage-file-list-menu",children:s(E,{children:s("img",{"aria-hidden":!0,height:22,src:Fr,width:22})})})})]})}),Hr=({files:a,selectedFileUUIDs:e,onSelectionChange:r,fileMenus:t,onItemMenuClick:i,titleClickable:o=!1,onItemTitleClick:n,renamingFileUUID:c,isLoadingData:u,onRename:d,onNewDirectoryFile:h,parentDirectoryPath:p})=>{const l=V(),f=k.exports.useRef(null),v=k.exports.useCallback(()=>f.current||document.body,[]),S=k.exports.useMemo(()=>[{title:C("span",{className:"cloud-storage-file-list-title-span",children:[s("span",{className:"cloud-storage-file-list-title",children:l("file-name")}),s(Pr,{getPopupContainer:v,placement:"right",title:l("supported-file-types")})]}),dataIndex:"fileName",ellipsis:!0,render:function(y,w,U){return s(Lr,{file:w,fileMenus:t,getPopupContainer:v,index:U,parentDirectoryPath:p,renamingFileUUID:c,titleClickable:o,onItemMenuClick:i,onItemTitleClick:n,onNewDirectoryFile:h,onRename:d})}},{title:s("span",{className:"cloud-storage-file-list-title",children:l("file-size")}),dataIndex:"fileSize",ellipsis:!0,width:100,sorter:(m,y)=>m.fileSize-y.fileSize,showSorterTooltip:!1,render:function(y){const w=rt(y);return s("span",{title:w,children:y===0?"-":w})}},{title:s("span",{className:"cloud-storage-file-list-title",children:l("edit-date")}),dataIndex:"createAt",ellipsis:!0,width:170,sorter:(m,y)=>m.createAt.valueOf()-y.createAt.valueOf(),sortDirections:["ascend","descend","ascend"],showSorterTooltip:!1,render:function(y){const w=Et(y,"yyyy/MM/dd HH:mm");return s("span",{title:w,children:w})}}],[l,v,t,p,c,o,i,n,h,d]);return C("div",{ref:f,className:"cloud-storage-file-list-table",children:[s(Zt,{columns:S,dataSource:a||[],locale:{emptyText:" "},pagination:!1,rowKey:"fileUUID",rowSelection:{selectedRowKeys:e,onChange:r},size:"small"}),u&&s("div",{className:"cloud-storage-pull-up-loading",children:s(kr,{})}),a.length<=0&&s("div",{className:"cloud-storage-file-list-empty",children:C("div",{className:"cloud-storage-file-list-empty-content",children:[s("img",{height:124,src:Cr,width:124}),s("div",{className:"cloud-storage-file-list-empty-text",children:l("no-data")})]})})]})},Vr="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m5 11 5 4 7-8' stroke='%237EC452' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e",Ae="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M15 9v6a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V9h0m1-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2h0M6 7h10m-3.5 3v4m-3-4v4' stroke='%237A7B7C' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e",Zr="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath fill='%23444E60' d='M16.328 4.879v2.828H13.5z'/%3e%3cpath d='M15.526 7.061A6 6 0 1 0 17 11' stroke='%23444E60' stroke-linejoin='round'/%3e%3c/g%3e%3c/svg%3e",Wr=({uploadID:a,fileName:e,percent:r,status:t,onRetry:i,onCancel:o})=>{const n=V();return C("div",{className:"cloud-storage-upload-item",children:[s(nt,{fileName:e,fileUUID:a}),c(),s("div",{className:R("cloud-storage-upload-item-progress-bar",{"is-error":t==="error"}),style:{width:`${r}%`}})]});function c(){switch(t){case"uploading":return C($,{children:[s("span",{className:"cloud-storage-upload-status",children:`${r}%`}),s(E,{className:"cloud-storage-upload-status-btn",shape:"circle",size:"small",onClick:()=>o(a),children:s("img",{"aria-hidden":!0,height:22,src:Ae,width:22})})]});case"error":return C($,{children:[s("span",{className:"cloud-storage-upload-status is-error",children:n("upload-fail")}),s(E,{className:"cloud-storage-upload-status-btn",shape:"circle",size:"small",onClick:()=>i(a),children:s("img",{"aria-hidden":!0,height:22,src:Zr,width:22})})]});case"success":return C($,{children:[s("span",{className:"cloud-storage-upload-status is-success",children:n("upload-success")}),s("div",{className:"cloud-storage-upload-status-btn",children:s("img",{"aria-hidden":!0,height:22,src:Vr,width:22})})]});default:return C($,{children:[s("span",{className:"cloud-storage-upload-status",children:n("pending-upload")}),s(E,{className:"cloud-storage-upload-status-btn",shape:"circle",size:"small",onClick:()=>o(a),children:s("img",{"aria-hidden":!0,height:22,src:Ae,width:22})})]})}}},qr="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m5 8 6 6 6-6' stroke='%237A7B7C' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e",Kr="data:image/svg+xml;charset=utf8,%3csvg width='22' height='22' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m6.757 6.757 8.486 8.486m0-8.486-8.486 8.486' stroke='%237A7B7C' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3e%3c/svg%3e";var ve=function(a,e){return ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])},ve(a,e)};function Yr(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ve(a,e);function r(){this.constructor=a}a.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ye=function(){return ye=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ye.apply(this,arguments)};function Xr(a,e){var r={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(r[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(a);i<t.length;i++)e.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(a,t[i])&&(r[t[i]]=a[t[i]]);return r}var ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qr(a){var e=typeof a;return a!=null&&(e=="object"||e=="function")}var Ce=Qr,Jr=typeof ie=="object"&&ie&&ie.Object===Object&&ie,ea=Jr,ta=ea,ra=typeof self=="object"&&self&&self.Object===Object&&self,aa=ta||ra||Function("return this")(),ot=aa,ia=ot,sa=function(){return ia.Date.now()},na=sa,oa=/\s/;function ca(a){for(var e=a.length;e--&&oa.test(a.charAt(e)););return e}var la=ca,da=la,ua=/^\s+/;function ha(a){return a&&a.slice(0,da(a)+1).replace(ua,"")}var pa=ha,fa=ot,ga=fa.Symbol,ct=ga,je=ct,lt=Object.prototype,ma=lt.hasOwnProperty,va=lt.toString,te=je?je.toStringTag:void 0;function ya(a){var e=ma.call(a,te),r=a[te];try{a[te]=void 0;var t=!0}catch{}var i=va.call(a);return t&&(e?a[te]=r:delete a[te]),i}var wa=ya,ba=Object.prototype,ka=ba.toString;function Ca(a){return ka.call(a)}var Sa=Ca,_e=ct,xa=wa,Ta=Sa,Ua="[object Null]",Pa="[object Undefined]",ze=_e?_e.toStringTag:void 0;function Fa(a){return a==null?a===void 0?Pa:Ua:ze&&ze in Object(a)?xa(a):Ta(a)}var Da=Fa;function Na(a){return a!=null&&typeof a=="object"}var Ma=Na,Oa=Da,Ia=Ma,Ea="[object Symbol]";function Ra(a){return typeof a=="symbol"||Ia(a)&&Oa(a)==Ea}var Aa=Ra,ja=pa,$e=Ce,_a=Aa,Be=0/0,za=/^[-+]0x[0-9a-f]+$/i,$a=/^0b[01]+$/i,Ba=/^0o[0-7]+$/i,Ga=parseInt;function La(a){if(typeof a=="number")return a;if(_a(a))return Be;if($e(a)){var e=typeof a.valueOf=="function"?a.valueOf():a;a=$e(e)?e+"":e}if(typeof a!="string")return a===0?a:+a;a=ja(a);var r=$a.test(a);return r||Ba.test(a)?Ga(a.slice(2),r?2:8):za.test(a)?Be:+a}var Ha=La,Va=Ce,fe=na,Ge=Ha,Za="Expected a function",Wa=Math.max,qa=Math.min;function Ka(a,e,r){var t,i,o,n,c,u,d=0,h=!1,p=!1,l=!0;if(typeof a!="function")throw new TypeError(Za);e=Ge(e)||0,Va(r)&&(h=!!r.leading,p="maxWait"in r,o=p?Wa(Ge(r.maxWait)||0,e):o,l="trailing"in r?!!r.trailing:l);function f(b){var D=t,x=i;return t=i=void 0,d=b,n=a.apply(x,D),n}function v(b){return d=b,c=setTimeout(y,e),h?f(b):n}function S(b){var D=b-u,x=b-d,I=e-D;return p?qa(I,o-x):I}function m(b){var D=b-u,x=b-d;return u===void 0||D>=e||D<0||p&&x>=o}function y(){var b=fe();if(m(b))return w(b);c=setTimeout(y,S(b))}function w(b){return c=void 0,l&&t?f(b):(t=i=void 0,n)}function U(){c!==void 0&&clearTimeout(c),d=0,t=u=i=c=void 0}function M(){return c===void 0?n:w(fe())}function T(){var b=fe(),D=m(b);if(t=arguments,i=this,u=b,D){if(c===void 0)return v(u);if(p)return clearTimeout(c),c=setTimeout(y,e),f(u)}return c===void 0&&(c=setTimeout(y,e)),n}return T.cancel=U,T.flush=M,T}var dt=Ka,Ya=dt,Xa=Ce,Qa="Expected a function";function Ja(a,e,r){var t=!0,i=!0;if(typeof a!="function")throw new TypeError(Qa);return Xa(r)&&(t="leading"in r?!!r.leading:t,i="trailing"in r?!!r.trailing:i),Ya(a,e,{leading:t,maxWait:e,trailing:i})}var ei=Ja,ut=function(a,e,r,t){switch(e){case"debounce":return dt(a,r,t);case"throttle":return ei(a,r,t);default:return a}},we=function(a){return typeof a=="function"},H=function(){return typeof window>"u"},Le=function(a){return a instanceof Element||a instanceof HTMLDocument},ht=function(a,e,r,t){return function(i){var o=i.width,n=i.height;e(function(c){return c.width===o&&c.height===n||c.width===o&&!t||c.height===n&&!r?c:(a&&we(a)&&a(o,n),{width:o,height:n})})}};(function(a){Yr(e,a);function e(r){var t=a.call(this,r)||this;t.cancelHandler=function(){t.resizeHandler&&t.resizeHandler.cancel&&(t.resizeHandler.cancel(),t.resizeHandler=null)},t.attachObserver=function(){var d=t.props,h=d.targetRef,p=d.observerOptions;if(!H()){h&&h.current&&(t.targetRef.current=h.current);var l=t.getElement();!l||t.observableElement&&t.observableElement===l||(t.observableElement=l,t.resizeObserver.observe(l,p))}},t.getElement=function(){var d=t.props,h=d.querySelector,p=d.targetDomEl;if(H())return null;if(h)return document.querySelector(h);if(p&&Le(p))return p;if(t.targetRef&&Le(t.targetRef.current))return t.targetRef.current;var l=Rt.exports.findDOMNode(t);if(!l)return null;var f=t.getRenderType();switch(f){case"renderProp":return l;case"childFunction":return l;case"child":return l;case"childArray":return l;default:return l.parentElement}},t.createResizeHandler=function(d){var h=t.props,p=h.handleWidth,l=p===void 0?!0:p,f=h.handleHeight,v=f===void 0?!0:f,S=h.onResize;if(!(!l&&!v)){var m=ht(S,t.setState.bind(t),l,v);d.forEach(function(y){var w=y&&y.contentRect||{},U=w.width,M=w.height,T=!t.skipOnMount&&!H();T&&m({width:U,height:M}),t.skipOnMount=!1})}},t.getRenderType=function(){var d=t.props,h=d.render,p=d.children;return we(h)?"renderProp":we(p)?"childFunction":k.exports.isValidElement(p)?"child":Array.isArray(p)?"childArray":"parent"};var i=r.skipOnMount,o=r.refreshMode,n=r.refreshRate,c=n===void 0?1e3:n,u=r.refreshOptions;return t.state={width:void 0,height:void 0},t.skipOnMount=i,t.targetRef=k.exports.createRef(),t.observableElement=null,H()||(t.resizeHandler=ut(t.createResizeHandler,o,c,u),t.resizeObserver=new window.ResizeObserver(t.resizeHandler)),t}return e.prototype.componentDidMount=function(){this.attachObserver()},e.prototype.componentDidUpdate=function(){this.attachObserver()},e.prototype.componentWillUnmount=function(){H()||(this.observableElement=null,this.resizeObserver.disconnect(),this.cancelHandler())},e.prototype.render=function(){var r=this.props,t=r.render,i=r.children,o=r.nodeType,n=o===void 0?"div":o,c=this.state,u=c.width,d=c.height,h={width:u,height:d,targetRef:this.targetRef},p=this.getRenderType(),l;switch(p){case"renderProp":return t&&t(h);case"childFunction":return l=i,l(h);case"child":if(l=i,l.type&&typeof l.type=="string"){h.targetRef;var f=Xr(h,["targetRef"]);return k.exports.cloneElement(l,f)}return k.exports.cloneElement(l,h);case"childArray":return l=i,l.map(function(v){return!!v&&k.exports.cloneElement(v,h)});default:return k.exports.createElement(n,null)}},e})(k.exports.PureComponent);var ti=H()?k.exports.useEffect:k.exports.useLayoutEffect;function ri(a){a===void 0&&(a={});var e=a.skipOnMount,r=e===void 0?!1:e,t=a.refreshMode,i=a.refreshRate,o=i===void 0?1e3:i,n=a.refreshOptions,c=a.handleWidth,u=c===void 0?!0:c,d=a.handleHeight,h=d===void 0?!0:d,p=a.targetRef,l=a.observerOptions,f=a.onResize,v=k.exports.useRef(r),S=k.exports.useRef(null),m=p!=null?p:S,y=k.exports.useRef(),w=k.exports.useState({width:void 0,height:void 0}),U=w[0],M=w[1];return ti(function(){if(!H()){var T=ht(f,M,u,h),b=function(x){!u&&!h||x.forEach(function(I){var G=I&&I.contentRect||{},B=G.width,Z=G.height,A=!v.current&&!H();A&&T({width:B,height:Z}),v.current=!1})};y.current=ut(b,t,o,n);var D=new window.ResizeObserver(y.current);return m.current&&D.observe(m.current,l),function(){D.disconnect();var x=y.current;x&&x.cancel&&x.cancel()}}},[t,o,n,u,h,f,l,m.current]),ye({ref:m},U)}const ai=Y.memo(function({finishWithError:e,finished:r,total:t}){const i=V(),o=r&&t?r/t*100:0,n=o>=100;return C("div",{className:"cloud-storage-upload-title",children:[e?s(At,{className:"cloud-storage-upload-title-error"}):s(br,{percent:o,showInfo:n,strokeWidth:n?8:10,type:"circle",width:20}),s("h1",{className:"cloud-storage-upload-title-content",children:i(e?"upload-exception":n?"upload-completed":"transfer-list")}),!n&&!e&&t&&!Number.isNaN(r)&&C("span",{className:"cloud-storage-upload-title-count",children:[r,"/",t]})]})}),ii=({maxHeight:a=260,finishWithError:e,compact:r,expand:t,finished:i,total:o,className:n,children:c,onExpandChange:u,onClose:d,...h})=>{const{height:p=0,width:l,ref:f}=ri();return C("section",{...h,className:R(n,"cloud-storage-upload-panel",{"is-panel-compact":r,"is-panel-fold":!t}),children:[C("header",{className:"cloud-storage-upload-panel-head",onClickCapture:v=>{r&&u&&(u(!t),v.stopPropagation())},children:[s(ai,{finishWithError:e,finished:i,total:o}),C("div",{className:"cloud-storage-upload-panel-head-btns",children:[s(E,{className:"cloud-storage-upload-panel-expand-btn",shape:"circle",size:"small",onClick:()=>u&&u(!t),children:s("img",{height:22,src:qr,width:22})}),!r&&s(E,{shape:"circle",size:"small",onClick:d,children:s("img",{height:22,src:Kr,width:22})})]})]}),s("div",{className:"cloud-storage-upload-panel-content fancy-scrollbar",style:{width:r&&!t?200:l,height:t?p<a?p:a:0},children:s("div",{ref:f,className:"cloud-storage-upload-panel-content-sizer",children:s("div",{className:"cloud-storage-upload-panel-status-list",children:c})})})]})},si=({isCompactMode:a})=>s("div",{className:"cloud-storage-skeletons",children:Array(10).fill(0).map((e,r)=>C("div",{className:"cloud-storage-skeletons-item",children:[s("div",{className:"cloud-storage-skeletons-item-icon",children:s(ae,{active:!0,paragraph:{rows:1,width:"100%"},title:!1})}),s("div",{className:R("cloud-storage-skeletons-item-file",{"cloud-storage-skeletons-item-file-compact":a}),children:s(ae,{active:!0,paragraph:{rows:1,width:"100%"},title:!1})}),s("div",{className:"cloud-storage-skeletons-item-file-size",children:s(ae,{active:!0,paragraph:{rows:1,width:"100%"},title:!1})}),s("div",{className:"cloud-storage-skeletons-item-file-date",children:s(ae,{active:!0,paragraph:{rows:1,width:"100%"},title:!1})})]},r))}),ni="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M16.375 9v8h1.25V9h-1.25ZM15 18.375H9v1.25h6v-1.25ZM7.625 17V9h-1.25v8h1.25ZM9 18.375c-.76 0-1.375-.616-1.375-1.375h-1.25A2.625 2.625 0 0 0 9 19.625v-1.25ZM16.375 17c0 .76-.616 1.375-1.375 1.375v1.25A2.625 2.625 0 0 0 17.625 17h-1.25ZM11 5.625h2v-1.25h-2v1.25Zm2 0c.76 0 1.375.616 1.375 1.375h1.25A2.625 2.625 0 0 0 13 4.375v1.25ZM9.625 7c0-.76.616-1.375 1.375-1.375v-1.25A2.625 2.625 0 0 0 8.375 7h1.25Z' fill='%23D21F00'/%3e%3cpath d='M4 7h16' stroke='%23D21F00' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3c/svg%3e",oi="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath opacity='.01' fill='white' d='M0 0h24v24H0z'/%3e%3cpath d='m11 7-.442.442a.625.625 0 0 0 .442.183V7ZM4.625 17V7h-1.25v10h1.25ZM6 5.625h2.172v-1.25H6v1.25Zm3.144.403 1.414 1.414.884-.884-1.414-1.414-.884.884ZM11 7.625h7v-1.25h-7v1.25ZM19.375 9v4h1.25V9h-1.25ZM14 18.375H6v1.25h8v-1.25Zm4-10.75c.76 0 1.375.616 1.375 1.375h1.25A2.625 2.625 0 0 0 18 6.375v1.25Zm-9.828-2c.364 0 .714.145.972.403l.884-.884a2.625 2.625 0 0 0-1.856-.769v1.25ZM4.625 7c0-.76.616-1.375 1.375-1.375v-1.25A2.625 2.625 0 0 0 3.375 7h1.25Zm-1.25 10A2.625 2.625 0 0 0 6 19.625v-1.25c-.76 0-1.375-.616-1.375-1.375h-1.25Z' fill='%235D6066'/%3e%3cpath d='M4 10h16' stroke='%235D6066' stroke-width='1.25'/%3e%3cpath d='M17 13v6' stroke='%235D6066' stroke-width='1.25' stroke-linejoin='round'/%3e%3cpath d='M20 16h-6' stroke='%235D6066' stroke-width='1.25'/%3e%3c/svg%3e",ci=de(function({task:e,onCancel:r,onRetry:t}){return s(Wr,{fileName:e.fileName,percent:e.percent,status:e.status,uploadID:e.uploadID,onCancel:r,onRetry:t})}),li=de(function({tasks:e,onCancel:r,onRetry:t}){return s($,{children:e.map(i=>s(ci,{task:i,onCancel:r,onRetry:t},i.uploadID))})}),di=de(function({store:e,isLoadingData:r}){return s(Hr,{titleClickable:!0,fileMenus:e.fileMenus,files:Ue(e.files),isLoadingData:r,parentDirectoryPath:e.parentDirectoryPath,renamingFileUUID:e.renamingFileUUID,selectedFileUUIDs:Ue(e.selectedFileUUIDs),onItemMenuClick:e.onItemMenuClick,onItemTitleClick:e.onItemTitleClick,onNewDirectoryFile:e.onNewDirectoryFile,onRename:e.onRename,onSelectionChange:e.onSelectionChange})}),ui="data:image/svg+xml;charset=utf8,%3csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill='white' fill-opacity='.01' d='M0 0h24v24H0z'/%3e%3cpath d='m9 6 3 3 3 3-3 3-3 3' stroke='%23B7BBC1' stroke-width='1.25' stroke-linejoin='round'/%3e%3c/svg%3e",hi=Y.memo(function({path:e,pushHistory:r}){const t=V(),i=k.exports.useMemo(()=>e.split("/").filter(Boolean),[e]),o=5;return s("div",{className:"cloud-storage-navigation-container",children:s(J,{separator:s("img",{src:ui}),children:i.length>=o?C($,{children:[s(J.Item,{children:s("a",{onClick:()=>r("/"),children:t("my-cloud")})}),s(J.Item,{children:s("span",{className:"cloud-storage-navigation-more-path",children:"..."})}),i.map((n,c)=>{const u="/"+i.slice(0,c+1).join("/")+"/";return i.slice(-3).some(d=>n===d)?s(J.Item,{children:s("a",{onClick:()=>r(u),children:n})},c):null})]}):C($,{children:[s(J.Item,{children:s("a",{onClick:()=>r("/"),children:t("my-cloud")})}),i.map((n,c)=>{const u="/"+i.slice(0,c+1).join("/")+"/";return s(J.Item,{children:s("a",{onClick:()=>r(u),children:n})},c)})]})})})});class pi{constructor(){g(this,"compact",!1);g(this,"totalUsage",NaN);g(this,"selectedFileUUIDs",F.array());g(this,"isUploadPanelExpand",!1);g(this,"renamingFileUUID","");g(this,"cloudStorageSinglePageFiles",50);g(this,"isFetchingFiles",!1);g(this,"parentDirectoryPath",new URLSearchParams(window.location.search).get("path")||"/");g(this,"setRenamePanel",e=>{this.renamingFileUUID=e});g(this,"setCurrentDirectoryPath",e=>{this.parentDirectoryPath=this.parentDirectoryPath+e+"/"});g(this,"setParentDirectoryPath",e=>{this.parentDirectoryPath=e});g(this,"setPanelExpand",e=>{this.isUploadPanelExpand=e});g(this,"setCompact",e=>{this.compact=e});g(this,"onSelectionChange",e=>{this.selectedFileUUIDs.replace(e)});g(this,"onRename",(e,r)=>{this.renamingFileUUID="",r&&this.onNewFileName(e,r)});qe(this,{compact:F,totalUsage:F,selectedFileUUIDs:F,isUploadPanelExpand:F,renamingFileUUID:F,isFetchingFiles:F,parentDirectoryPath:F,isUploadPanelVisible:_,totalUsageHR:_,sortedUploadTasks:_,uploadFinishWithError:_,uploadFinishedCount:_,uploadTotalCount:_,setRenamePanel:O,setCurrentDirectoryPath:O,setParentDirectoryPath:O,setPanelExpand:O,setCompact:O,onSelectionChange:O,onRename:O})}get isUploadPanelVisible(){return this.uploadTotalCount>0}get totalUsageHR(){return Number.isNaN(this.totalUsage)?"":rt(this.totalUsage,{binary:!0})}get cloudStorageDataPagination(){return Math.ceil(this.files.length/this.cloudStorageSinglePageFiles)}get sortedUploadTasks(){return F.array([...this.uploadingUploadTasks,...this.failedUploadTasks,...this.pendingUploadTasks,...this.successUploadTasks])}get uploadFinishWithError(){return this.pendingUploadTasks.length>0||this.uploadingUploadTasks.length>0?!1:this.failedUploadTasks.length>0}get uploadFinishedCount(){return this.successUploadTasks.length}get uploadTotalCount(){return this.sortedUploadTasks.length}}const fi=[".ppt",".pptx",".doc",".docx",".pdf",".png",".jpg",".jpeg",".gif",".mp3",".mp4"],gi=a=>fi.some(e=>a.name.endsWith(e)),pt=a=>Array.from(a).every(e=>gi(e)),mi=a=>{a.preventDefault(),pt(a.dataTransfer.files)&&(a.dataTransfer.dropEffect="copy")},Ni=de(function({store:e,path:r,pushHistory:t}){const i=V(),o=k.exports.useRef(null),[n,c]=k.exports.useState(!1),[u,d]=k.exports.useState(!1);k.exports.useEffect(()=>{const m=window.setTimeout(()=>c(!0),200);return()=>window.clearTimeout(m)},[]),k.exports.useEffect(()=>{u&&e.fetchMoreCloudStorageData(e.cloudStorageDataPagination+1,e.parentDirectoryPath)},[u,e]);const h=k.exports.useCallback(m=>{m.preventDefault(),pt(m.dataTransfer.files)&&e.onDropFile(m.dataTransfer.files)},[e]),p=s(oe,{items:[{label:i("new-directory"),key:"new-directory",icon:s("img",{src:oi}),onClick:e.onNewEmptyDirectory}]}),l=s(oe,{items:[{label:i("local-file"),key:"local-file",onClick:e.onUpload}]}),f=m=>C("span",{className:R("cloud-storage-container-btn-arrow",{"cloud-storage-container-btn-arrow-primary":m}),children:[s("span",{}),s("span",{})]}),v=C("div",{className:"cloud-storage-container-btns",children:[e.selectedFileUUIDs.length>=1&&s("span",{onClick:e.onBatchDelete,children:s("img",{className:"cloud-storage-container-btn-delete",src:ni})}),s(ne,{overlay:p,placement:"bottomLeft",children:C(E,{className:"cloud-storage-container-dropdown-btn",children:[i("new"),f()]})}),s(ne,{overlay:l,placement:"bottomLeft",children:C(E,{className:"cloud-storage-container-dropdown-btn",type:"primary",children:[i("upload"),f(!0)]})})]}),S=()=>{if(o.current){const m=o.current.scrollTop,y=o.current.clientHeight,U=o.current.scrollHeight-30;d(Math.ceil(m+y)>=U)}};return C("div",{className:"cloud-storage-container",onDragOver:mi,onDrop:h,children:[!e.compact&&C("div",{className:"cloud-storage-container-head",children:[C("div",{children:[s("h1",{className:"cloud-storage-container-title",children:i("my-cloud")}),s("small",{className:R("cloud-storage-container-subtitle",{"is-hide":!e.totalUsage}),children:e.totalUsageHR?i("used-storage",{usage:e.totalUsageHR}):"-"})]}),v]}),s("div",{className:"cloud-storage-container-navigation-box",children:r!==null&&r!=="/"&&s(hi,{path:r,pushHistory:t})}),s("div",{ref:o,className:"cloud-storage-container-file-list fancy-scrollbar",onScroll:S,children:e.totalUsageHR?s(di,{isLoadingData:e.isFetchingFiles,store:e}):n?s(si,{isCompactMode:e.compact}):null}),s(Wt,{mountOnEnter:!0,unmountOnExit:!0,classNames:"cloud-storage-container-mask",in:e.isUploadPanelVisible&&e.isUploadPanelExpand&&e.compact,timeout:400,children:s("div",{className:"cloud-storage-container-mask",onClick:m=>{m.target===m.currentTarget&&e.setPanelExpand(!1)}})}),e.isUploadPanelVisible&&s(ii,{className:"cloud-storage-container-upload-panel",compact:e.compact,expand:e.isUploadPanelExpand,finishWithError:e.uploadFinishWithError,finished:e.uploadFinishedCount,total:e.uploadTotalCount,onClose:e.onUploadPanelClose,onExpandChange:e.setPanelExpand,children:s(li,{tasks:e.sortedUploadTasks,onCancel:e.onUploadCancel,onRetry:e.onUploadRetry})}),e.compact&&s("div",{className:"cloud-storage-container-footer",children:v})]})}),vi=a=>(/\.([^.]+)$/.exec(a)||["",""])[1].toLowerCase(),yi=a=>/\.pptx$/i.test(a);var q=(a=>(a[a.Pending=1]="Pending",a[a.Starting=2]="Starting",a[a.Uploading=3]="Uploading",a[a.Success=4]="Success",a[a.Failed=5]="Failed",a[a.Cancelling=6]="Cancelling",a[a.Cancelled=7]="Cancelled",a))(q||{});class wi{constructor(e,r){g(this,"uploadID",jt());g(this,"status",1);g(this,"percent",0);g(this,"file");g(this,"fileUUID");g(this,"targetDirectoryPath");g(this,"_cancelTokenSource");this.file=e,this.targetDirectoryPath=r,Ke(this,{file:F.ref,_cancelTokenSource:!1})}async upload(){if(this.getStatus()!==1)return;const e="LTAI5tAzWZLUQS3ueBFSoKjE",{name:r,size:t}=this.file;try{this.updateStatus(2);let i;try{i=await Pe({fileName:r,fileSize:t,targetDirectoryPath:this.targetDirectoryPath})}catch(l){if(_t(l)&&l.errorCode===zt.UploadConcurrentLimit)console.warn("[cloud-storage]: hit max concurrent upload count limit"),i=await Pe({fileName:r,fileSize:t,targetDirectoryPath:this.targetDirectoryPath});else throw l}const{ossFilePath:o,fileUUID:n,policy:c,ossDomain:u,signature:d}=i;if(this.getStatus()!==2)return;this.updateFileUUID(n);const h=new FormData,p=encodeURIComponent(r);h.append("key",o),h.append("name",r),h.append("policy",c),h.append("OSSAccessKeyId",e),h.append("success_action_status","200"),h.append("callback",""),h.append("signature",d),h.append("Content-Disposition",`attachment; filename="${p}"; filename*=UTF-8''${p}`),h.append("file",this.file),this._cancelTokenSource=pe.CancelToken.source(),this.updateStatus(3),await pe.post(u,h,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:l=>{this.updatePercent(Math.floor(100*l.loaded/l.total))},cancelToken:this._cancelTokenSource.token})}catch(i){i instanceof pe.Cancel?this.updateStatus(7):(console.error(i),this.updateStatus(5),ee(i))}this._cancelTokenSource=void 0,this.getStatus()===3&&(await this.finish(),this.updateStatus(4))}async finish(){if(this.fileUUID)try{await $t({fileUUID:this.fileUUID,isWhiteboardProjector:yi(this.file.name)})}catch(e){console.error(e)}}cancelUploadProgress(){this._cancelTokenSource&&(this._cancelTokenSource.cancel(),this._cancelTokenSource=void 0)}async cancelUpload(){if(!(this.getStatus()===6||!this.fileUUID)){this.updateStatus(6);try{this.cancelUploadProgress()}catch(e){console.error(e)}this.updateStatus(7)}}updateFileUUID(e){this.fileUUID=e}updatePercent(e){this.percent=e}updateStatus(e){this.status=e}getStatus(){return this.status}}const Se=class{constructor(){g(this,"status",1);g(this,"uploadingMap",F.map());g(this,"pending",F.array());g(this,"success",F.array());g(this,"failed",F.array());Ke(this)}get uploading(){return F.array([...this.uploadingMap.values()].reverse())}addTasks(e,r){for(const t of e){const i=new wi(t,r);this.pending.unshift(i)}this.startUpload()}async startUpload(){if(this.getStatus()!==3){if(this.pending.length<=0){this.updateStatus(1);return}for(this.updateStatus(2);this.uploadingMap.size<Se.MaxUploadingCount;){if(this.getStatus()!==2)return;const e=this.popPendingTask();e&&(N(()=>{this.uploadingMap.set(e.uploadID,e)}),e.upload().then(()=>this.finishUpload(e))),await new Promise(r=>setTimeout(r,200))}}}finishUpload(e){this.uploadingMap.delete(e.uploadID),e.status===q.Success?this.success.unshift(e):e.status===q.Failed&&this.failed.unshift(e),this.startUpload()}retry(e){const r=this.failed.findIndex(t=>t.uploadID===e);if(r>=0){const t=this.failed[r];this.failed.splice(r,1),this.addTasks([t.file],t.targetDirectoryPath)}}async cancel(e){const r=this.uploadingMap.get(e);r&&(await r.cancelUpload(),N(()=>{this.uploadingMap.delete(e)}))}async cancelAll(){if(this.getStatus()!==3){this.updateStatus(3);for(const e of this.uploadingMap.values())e.cancelUploadProgress();N(()=>{this.pending.clear(),this.success.clear(),this.failed.clear(),this.uploadingMap.clear()}),this.updateStatus(1)}}updateStatus(e){this.status=e}getStatus(){return this.status}popPendingTask(){return this.pending.pop()}};let se=Se;g(se,"MaxUploadingCount",3);let ge;function bi(){return ge||(ge=new se),ge}class ki{constructor(){g(this,"sideEffect",new Bt);g(this,"tasks",new Map)}hasTask(e){return this.tasks.has(e)}async addTask(e,r=1500){const t=Ye(e.resourceType,e.meta);if(t===null)return;const{convertStep:i}=t;if(i===P.Done||i===P.Failed||this.tasks.has(e.fileUUID))return;const o=vi(e.fileName),n=await Xe.getInstance().requestService(`file-convert:${o}`);if(!!n){if(i===P.None)try{const c=await n.startConvert(e);c&&(c.resourceType===j.WhiteboardProjector&&N(()=>{e.meta.whiteboardProjector&&(e.meta.whiteboardProjector.convertStep=P.Converting,e.meta.whiteboardProjector.taskUUID=c.taskUUID,e.meta.whiteboardProjector.taskToken=c.taskToken)}),c.resourceType===j.WhiteboardConvert&&N(()=>{e.meta.whiteboardConvert&&(e.meta.whiteboardConvert.convertStep=P.Converting,e.meta.whiteboardConvert.taskUUID=c.taskUUID,e.meta.whiteboardConvert.taskToken=c.taskToken)}))}catch(c){console.error(c),N(()=>{e.meta.whiteboardProjector&&(e.meta.whiteboardProjector.convertStep=P.Failed),e.meta.whiteboardConvert&&(e.meta.whiteboardConvert.convertStep=P.Failed)}),await Fe({fileUUID:e.fileUUID});return}this.tasks.set(e.fileUUID,e),this.sideEffect.setInterval(async()=>{const c=await n.queryStatus(e);if(c.status===P.Done||c.status===P.Failed){try{await Fe({fileUUID:e.fileUUID})}catch(u){console.error(u)}N(()=>{e.meta.whiteboardConvert&&(e.meta.whiteboardConvert.convertStep=c.status),e.meta.whiteboardProjector&&(e.meta.whiteboardProjector.convertStep=c.status)}),c.error&&ee(c.error),this.cancelTask(e.fileUUID)}},r,e.fileUUID)}}cancelTask(e){this.sideEffect.flush(e),this.tasks.delete(e)}cancelAllTasks(){this.sideEffect.flushAll(),this.tasks.clear()}}class Ci{constructor(e,r){g(this,"running",!1);g(this,"timer",0);g(this,"invoke",async()=>{window.clearTimeout(this.timer),await this.task(),this.running&&(this.timer=window.setTimeout(this.invoke,this.interval))});this.task=e,this.interval=r}start(){this.running=!0,this.invoke()}stop(){this.running=!1,window.clearTimeout(this.timer)}}class ft extends pi{constructor({compact:r,insertCourseware:t}){super();g(this,"uploadTaskManager",bi());g(this,"filesMap",F.map());g(this,"insertCourseware");g(this,"onCoursewareInserted");g(this,"hasMoreFile",!0);g(this,"isOpenDirectoryFile",!1);g(this,"convertStatusManager",new ki);g(this,"scheduler");g(this,"fileMenus",r=>{var i,o;const t=[{key:"open",name:z.t("open")}];return(((i=r.meta.whiteboardConvert)==null?void 0:i.convertStep)!==P.Failed||((o=r.meta.whiteboardProjector)==null?void 0:o.convertStep)!==P.Failed)&&t.push({key:"rename",name:z.t("rename")}),r.resourceType!==j.Directory&&t.push({key:"download",name:z.t("download")}),t.push({key:"delete",className:"danger",name:z.t("delete")}),t});g(this,"onParentDirectoryPathClick",r=>{this.setParentDirectoryPath(r),this.isOpenDirectoryFile=!0,this.scheduler.invoke()});g(this,"onItemMenuClick",(r,t,i)=>{switch(t){case"open":{this.onItemTitleClick(r,i);break}case"download":{this.downloadFile(r);break}case"rename":{this.setRenamePanel(r);break}case"delete":{re.confirm({content:z.t("delete-courseware-tips"),onOk:()=>this.removeFiles([r])});break}default:console.warn("[cloud-storage]: unhandled item menu click")}});g(this,"onItemTitleClick",(r,t)=>{var o,n;const i=this.filesMap.get(r);if(i)try{if(i.resourceType===j.Directory){this.setCurrentDirectoryPath(i.fileName),t(this.parentDirectoryPath),this.isOpenDirectoryFile=!0;return}this.compact?((o=i.meta.whiteboardConvert)==null?void 0:o.convertStep)===P.Failed||((n=i.meta.whiteboardProjector)==null?void 0:n.convertStep)===P.Failed?re.info({content:z.t("the-courseware-cannot-be-transcoded")}):this.insertCourseware(i):this.previewCourseware(i)}catch(c){console.error(c)}});g(this,"onBatchDelete",()=>{this.selectedFileUUIDs.length>0&&re.confirm({content:z.t("delete-select-courseware-tips"),onOk:async()=>{this.selectedFileUUIDs.length>0&&await this.removeFiles(this.selectedFileUUIDs)}})});g(this,"onUpload",async()=>{try{const r=await this.pickCourseware();r&&r.length>0&&(this.setPanelExpand(!0),this.uploadTaskManager.addTasks(Array.from(r),this.parentDirectoryPath))}catch(r){ee(r)}});g(this,"onUploadPanelClose",()=>{this.uploadTaskManager.pending.length>0||this.uploadTaskManager.uploading.length>0?re.confirm({title:z.t("cancel-upload"),content:z.t("cancel-upload-tips"),cancelText:z.t("think-again"),onOk:()=>this.cancelAll()}):this.cancelAll()});g(this,"onUploadRetry",r=>{this.uploadTaskManager.retry(r)});g(this,"onUploadCancel",async r=>{try{await this.uploadTaskManager.cancel(r)}catch(i){console.error(i)}this.uploadTaskManager.pending.length+this.uploadTaskManager.success.length+this.uploadTaskManager.failed.length+this.uploadTaskManager.uploading.length<=0&&this.setPanelExpand(!1)});g(this,"onNewEmptyDirectory",async()=>{N(()=>{this.filesMap.set("temporaryDirectory",{fileName:"",fileURL:"/",fileUUID:"temporaryDirectory",fileSize:0,createAt:new Date,resourceType:j.Directory,meta:{}})})});g(this,"onNewDirectoryFile",async r=>{try{if(r.directoryName===""){this.filesMap.delete("temporaryDirectory");return}const{fileUUID:t}=await Gt(r);N(()=>{this.filesMap.delete("temporaryDirectory"),this.filesMap.set(t,{fileName:r.directoryName,fileURL:"",fileUUID:t,fileSize:0,createAt:new Date,resourceType:j.Directory,meta:{}})})}catch(t){ee(t)}});g(this,"onNewFileName",async(r,t)=>{const i=this.filesMap.get(r);if(i){if(i.fileName===t.fullName)return;await Lt({fileUUID:r,newName:t.name}),N(()=>{i.fileName=t.fullName})}});g(this,"fetchMoreCloudStorageData",async r=>{if(this.isFetchingFiles)return;const t=this.cloudStorageDataPagination*this.cloudStorageSinglePageFiles;if(this.filesMap.size>=t&&this.hasMoreFile){N(()=>{this.isFetchingFiles=!0});try{const{files:i}=await De({page:r,order:"DESC",directoryPath:this.parentDirectoryPath});N(()=>{this.isFetchingFiles=!1}),this.hasMoreFile=i.length>0;const o={};for(const n of i){const c=this.filesMap.get(n.fileUUID);N(()=>{c?(c.createAt.valueOf()!==n.createAt.valueOf()&&(c.createAt=n.createAt),c.fileName=n.fileName,c.fileSize=n.fileSize,c.resourceType=n.resourceType,Ne(c.meta,n.meta)||(c.meta=n.meta)):o[n.fileUUID]=F.object(n)})}N(()=>{this.filesMap.merge(o)})}catch{N(()=>{this.isFetchingFiles=!1})}}});g(this,"refreshFiles",async()=>{try{const{totalUsage:r,files:t}=await De({page:1,order:"DESC",directoryPath:this.parentDirectoryPath});N(()=>{this.totalUsage=r});const i={},o=[];for(const n of t){const c=this.filesMap.get(n.fileUUID);N(()=>{c?(c.createAt.valueOf()!==n.createAt.valueOf()&&(c.createAt=n.createAt),c.fileName=n.fileName,c.fileSize=n.fileSize,c.resourceType=n.resourceType,Ne(c.meta,n.meta)||(c.meta=n.meta)):i[n.fileUUID]=F.object(n)}),n.meta.whiteboardProjector&&(n.meta.whiteboardProjector.convertStep===P.Done||n.meta.whiteboardProjector.convertStep===P.Failed?this.convertStatusManager.cancelTask(n.fileUUID):o.push(n.fileUUID)),n.meta.whiteboardConvert&&(n.meta.whiteboardConvert.convertStep===P.Done||n.meta.whiteboardConvert.convertStep===P.Failed?this.convertStatusManager.cancelTask(n.fileUUID):o.push(n.fileUUID))}N(()=>{this.isOpenDirectoryFile?(this.filesMap.replace(i),this.isOpenDirectoryFile=!1):this.filesMap.merge(i)});for(const n of o)await this.queryConvertStatus(n)}catch(r){ee(r)}});this.insertCourseware=t,this.compact=r,this.scheduler=new Ci(this.refreshFiles,10*1e3),qe(this,{filesMap:F,pendingUploadTasks:_,uploadingUploadTasks:_,successUploadTasks:_,failedUploadTasks:_,files:_,fileMenus:O,onItemMenuClick:O,onItemTitleClick:O,onParentDirectoryPathClick:O,onBatchDelete:O,onUpload:O,onUploadPanelClose:O,onUploadRetry:O,onUploadCancel:O,onNewFileName:O,onNewEmptyDirectory:O})}get pendingUploadTasks(){return this.mapUploadTasks(this.uploadTaskManager.pending)}get uploadingUploadTasks(){return this.mapUploadTasks(this.uploadTaskManager.uploading)}get successUploadTasks(){return this.mapUploadTasks(this.uploadTaskManager.success)}get failedUploadTasks(){return this.mapUploadTasks(this.uploadTaskManager.failed)}get files(){return F.array([...this.filesMap.values()].sort((r,t)=>{const i=r.resourceType==="Directory",o=t.resourceType==="Directory";return i===o?t.createAt.valueOf()-r.createAt.valueOf():i?-1:1}))}onDropFile(r){this.setPanelExpand(!0),this.uploadTaskManager.addTasks(Array.from(r),this.parentDirectoryPath)}initialize({onCoursewareInserted:r}={}){this.onCoursewareInserted=r,this.scheduler.start(),this.uploadTaskManager.pending.length<=0&&this.uploadTaskManager.uploadingMap.size<=0&&this.uploadTaskManager.cancelAll();const t=Ht(()=>this.uploadTaskManager.uploading.length,(i,o)=>{i<o&&(console.log("[cloud storage]: start now refresh"),this.scheduler.invoke(),this.hasMoreFile=!0)});return()=>{t(),this.scheduler.stop(),this.convertStatusManager.cancelAllTasks(),this.onCoursewareInserted=void 0}}async previewCourseware(r){const t=await Xe.getInstance().requestService("file");t==null||t.preview(r)}async removeFiles(r){try{const t=[];r.forEach(i=>{t.push(i)}),await Promise.all([Vt({uuids:t})]),N(()=>{for(const i of r)this.filesMap.delete(i);this.selectedFileUUIDs.clear()})}catch(t){ee(t)}}downloadFile(r){const t=this.filesMap.get(r);if(t&&t.fileURL){const i=document.createElement("a");i.href=t.fileURL,i.click()}}pickCourseware(){return new Promise(r=>{const t=document.createElement("input");t.type="file",t.multiple=!0,t.accept=".ppt,.pptx,.doc,.docx,.pdf,.png,.jpg,.jpeg,.gif,.mp3,.mp4",t.onchange=()=>r(t.files),t.click()})}static mapUploadStatus(r){switch(r){case q.Pending:return"idle";case q.Success:return"success";case q.Starting:case q.Uploading:return"uploading";default:return"error"}}mapUploadTasks(r){return F.array(r.map(t=>({uploadID:t.uploadID,fileName:t.file.name,percent:t.percent,status:ft.mapUploadStatus(t.status)})))}async queryConvertStatus(r){const t=this.filesMap.get(r);if(!!t&&(t.resourceType===j.WhiteboardConvert||t.resourceType===j.WhiteboardProjector)){const i=Ye(t.resourceType,t.meta);if(i===null||i.convertStep===P.Done||i.convertStep===P.Failed)return;this.convertStatusManager.addTask(t)}}async cancelAll(){try{await this.uploadTaskManager.cancelAll()}catch(r){console.error(r)}this.setPanelExpand(!1)}}export{ft as C,wi as U,Ni as a};
//# sourceMappingURL=style.9d551dbf.js.map
