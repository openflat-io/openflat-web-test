import{b8 as f,k as d,q as r,aY as x,cA as g,dz as v}from"./index.43c4ffc0.js";import{q as m}from"./courseware-converting.d1c4ae45.js";import{u as w}from"./lifecycle.32153b61.js";const S=f(function({taskUUID:i,taskToken:e,region:t,projector:c}){const s=d.exports.useRef(null),a=d.exports.useRef(null),o=w();return d.exports.useEffect(()=>{async function p(){var l;const u=await o(m({taskUUID:i,taskToken:e,dynamic:!0,region:t,projector:c}));a.current&&(s.current=x({container:a.current,taskId:u.uuid,url:u.prefix||R((l=u.progress)==null?void 0:l.convertedFileList[0].conversionFileUrl)}))}return p().catch(console.warn),()=>{s.current&&(s.current.destroy(),s.current=null)}},[]),r("div",{ref:a,className:"dynamic-preview-container"})});function R(n){if(!n||!n.startsWith("ppt"))return;const e=/^pptx?(?<prefix>:\/\/\S+?dynamicConvert)\/(?<taskId>\w+)\//.exec(n);if(!(!e||!e.groups))return"https"+e.groups.prefix}function P(n){return(/\.[a-z1-9]+$/i.exec(n)||[""])[0].toLowerCase()}const h=f(function({fileURL:i}){const e=decodeURIComponent(i),t=P(e);return r("div",{className:"media-preview-container",children:c()});function c(){switch(t){case".mp3":return r("div",{className:"audio-container",children:r("audio",{controls:!0,src:e})});case".jpg":case".jpeg":case".png":return r("div",{className:"img-container",children:r("img",{alt:"img resource",src:e})});default:return r("video",{controls:!0,src:e})}}});const y=f(function({taskUUID:i,taskToken:e,region:t}){const[c,s]=d.exports.useState([]),a=w();return d.exports.useEffect(()=>{async function o(){var u;const p=await a(m({taskUUID:i,taskToken:e,dynamic:!1,region:t,projector:!1}));s((u=p.progress)==null?void 0:u.convertedFileList)}o().catch(console.warn)},[]),r("div",{className:"static-preview-container",children:r("div",{className:"static-preview-list",children:c==null?void 0:c.map(o=>r("img",{className:"static-preview-item",src:o.conversionFileUrl},o.conversionFileUrl))})})}),j=f(function(){const{fileURL:i,taskToken:e,taskUUID:t,region:c,projector:s}=g(),a=decodeURIComponent(i);return r("div",{className:"cloud-storage-preview-container",children:o()});function o(){switch(P(a)){case".pptx":return t&&e?r(S,{projector:s==="projector",region:c,taskToken:e,taskUUID:t}):r(v,{});case".ppt":case".pdf":case".doc":case".docx":return t&&e?r(y,{region:c,taskToken:e,taskUUID:t}):r(v,{});default:return r(h,{fileURL:i})}}});export{j as ResourcePreviewPage,j as default};
//# sourceMappingURL=index.186228c6.js.map
