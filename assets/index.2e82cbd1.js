import{q as a,m as o,aZ as N,k as c,b3 as g,A as b,b8 as L}from"./index.43c4ffc0.js";import{U as y}from"./UserSettingLayoutContainer.e2f93cae.js";import{u as A}from"./hooks.a08a5162.js";import{r as v,S,l as D,a as C}from"./SVGDelete.23bfc507.js";import{u as k}from"./lifecycle.32153b61.js";import{T as M}from"./Table.77c4b21e.js";import{n as U}from"./noop.c988f9cd.js";import"./SVGCircleInfoOutlined.7081c7f0.js";import"./use-login-check.e01c4832.js";import"./routes.73fc4946.js";import"./index.10dbff5d.js";const R=({active:l,className:e="",...t})=>a("svg",{className:`${e} flat-icon ${l?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:a("path",{className:"flat-icon-fill-color",clipRule:"evenodd",d:"M3.375 12a8.625 8.625 0 1 1 17.25 0 8.625 8.625 0 0 1-17.25 0Zm13.067-2.058-.884-.884L11 13.617l-2.558-2.559-.884.884 3 3 .087.072c.243.169.58.145.797-.072l5-5Z",fill:"#5D6066",fillRule:"evenodd"})}),V=({active:l,className:e="",...t})=>a("svg",{className:`${e} flat-icon ${l?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...t,children:a("path",{className:"flat-icon-fill-color",d:"m7.265 14.925.294.552-.294-.552Zm-.03.724.324-.172-.588-1.103-.324.173.588 1.102Zm3.203-3.128.121-.242-1.118-.559-.12.242 1.117.559Zm-.813-2.935V7h-1.25v2.586h1.25ZM14.375 7v2.586h1.25V7h-1.25Zm-.934 5.28.12.241 1.119-.559-.121-.242-1.118.56Zm3 3.197.324.172.588-1.102-.324-.173-.588 1.103Zm.324.172A4.93 4.93 0 0 1 19.375 20h1.25a6.18 6.18 0 0 0-3.272-5.453l-.588 1.102Zm-3.203-3.128a6.793 6.793 0 0 0 2.879 2.956l.588-1.103a5.543 5.543 0 0 1-2.35-2.412l-1.117.559Zm.813-2.935c0 .74-.294 1.449-.817 1.972l.884.884a4.04 4.04 0 0 0 1.183-2.856h-1.25ZM9.625 7A2.375 2.375 0 0 1 12 4.625v-1.25A3.625 3.625 0 0 0 8.375 7h1.25Zm.817 4.558a2.79 2.79 0 0 1-.817-1.972h-1.25c0 1.071.426 2.098 1.183 2.856l.884-.884Zm-2.883 3.919a6.793 6.793 0 0 0 2.88-2.956l-1.119-.559a5.543 5.543 0 0 1-2.349 2.412l.588 1.103ZM12 4.625A2.375 2.375 0 0 1 14.375 7h1.25A3.625 3.625 0 0 0 12 3.375v1.25ZM4.625 20a4.93 4.93 0 0 1 2.61-4.35l-.588-1.103A6.18 6.18 0 0 0 3.375 20h1.25Z",fill:"#5D6066"})}),$=({active:l,className:e="",...t})=>o("svg",{className:`${e} flat-icon ${l?"is-active":""}`,fill:"none",height:"18",viewBox:"0 0 18 18",width:"18",xmlns:"http://www.w3.org/2000/svg",...t,children:[a("circle",{className:"flat-icon-stroke-color",cx:"9",cy:"9",r:"6",stroke:"#5D6066",strokeLinejoin:"round"}),a("path",{className:"flat-icon-stroke-color",d:"M3 9H15M9 3V15",stroke:"#5D6066"}),a("path",{className:"flat-icon-stroke-color",d:"M9 3L8.65686 3.34314C5.53266 6.46734 5.53266 11.5327 8.65686 14.6569L9 15",stroke:"#5D6066"}),a("path",{className:"flat-icon-stroke-color",d:"M9 3L9.34314 3.34314C12.4673 6.46734 12.4673 11.5327 9.34314 14.6569L9 15",stroke:"#5D6066"})]});const q=({navigate:l})=>{const e=N(),t=k(),[r,i]=c.exports.useState(!0),[n,m]=c.exports.useState([]),d=c.exports.useCallback(s=>{g.confirm({content:e("apps-revoke-confirm",{appName:s.appName}),onOk:async()=>{await t(v(s.oauthUUID)),m(n.filter(p=>p!==s))}})},[n,t,e]),h=c.exports.useMemo(()=>[{key:"appName",dataIndex:"appName",title:e("oauth-app-name"),render:(s,p)=>o("a",{className:"applications-app-name-wrapper",onClick:()=>l(p),children:[a("img",{alt:"logo",className:"applications-app-logo",src:p.logoURL,title:s}),a("span",{className:"applications-app-name",children:s})]})},{key:"ownerName",dataIndex:"ownerName",title:e("oauth-app-creator")},{key:"homepageURL",dataIndex:"homepageURL",title:e("oauth-homepage"),render:s=>a("a",{href:s,rel:"noreferrer",target:"_blank",children:s})},{key:"action",render:(s,p)=>a("button",{className:"applications-revoke-btn",title:e("delete"),onClick:()=>d(p),children:a(S,{className:"applications-revoke-icon"})})}],[l,d,e]);return c.exports.useEffect(()=>{i(!0),t(D(1,50)).then(s=>{m(s),i(!1)})},[t]),o("div",{className:"applications",children:[n.length?a("p",{className:"applications-stats",children:e("apps-stats",{count:n.length})}):null,a(M,{columns:h,dataSource:n,loading:r,locale:{emptyText:e("no-data")},pagination:!1,rowKey:"oauthUUID"})]})},B=({oauthUUID:l,navigate:e})=>{const t=N(),r=k(),[i,n]=c.exports.useState(null),[m,d]=c.exports.useState(!1);c.exports.useEffect(()=>{d(!1),r(C(l)).then(n).catch(()=>{d(!0)})},[l,r]);const h=c.exports.useCallback(()=>{!i||g.confirm({content:t("apps-revoke-confirm",{appName:i.appName}),onOk:async()=>{await r(v(l).catch(U)),e(null)}})},[i,e,l,r,t]);if(m)return o("div",{className:"application-detail-error",children:['Failed to fetch application detail of "',l,'"']});if(i===null)return o("div",{className:"application-detail-loading",children:[t("loading"),"\u2026"]});const{logoURL:s,appName:p,ownerName:w,homepageURL:f,appDesc:x,scopes:Z}=i;return o("section",{className:"application-detail",children:[o("header",{className:"application-detail-brand",children:[a("div",{className:"application-detail-brand-logo",children:a("img",{alt:"logo",src:s})}),o("div",{className:"application-detail-brand-info",children:[a("div",{className:"application-detail-name",children:p}),o("div",{className:"application-detail-owner-url",children:[o("span",{className:"application-detail-owner",children:[a(V,{}),a("span",{children:w})]}),o("span",{className:"application-detail-url",children:[a($,{}),a("a",{href:f,children:f})]})]})]}),a("div",{className:"application-detail-brand-action",children:a(b,{danger:!0,onClick:h,children:t("apps-revoke")})})]}),a("p",{className:"application-detail-desc",children:x}),o("div",{className:"application-detail-scopes",children:[a("h4",{children:t("apps-permissions")}),a("ul",{children:Z.map(u=>o("li",{className:"application-detail-scope","data-scope":u,children:[a(R,{}),a("span",{className:"application-detail-scope-text",children:t("oauth-scope-"+u.replace(/[.:]/g,"-"))})]},u))})]})]})},Q=L(function(){const[e,t]=A(),r=c.exports.useCallback(n=>{t({q:n==null?void 0:n.oauthUUID})},[t]),i=e.get("q");return a(y,{children:i?a(B,{navigate:r,oauthUUID:i}):a(q,{navigate:r})})});export{Q as ApplicationsPage,Q as default};
//# sourceMappingURL=index.2e82cbd1.js.map
