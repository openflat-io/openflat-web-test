import{q as t,k as d,b8 as P,aZ as y,bb as A,bF as L,m as c,x as M,n as U,b2 as V}from"./index.43c4ffc0.js";import{n as j,w as G,u as z,S as O,a as F,W as $,E as K,R as Q,m as x,b as q,N as H,T as J,c as X,d as v,e as Y,C as Z,f as _,I as ee,U as te,g as ae,h as ie,i as ne,j as se,k as re,l as le}from"./UsersButton.3be34569.js";import{S as oe}from"./SVGRight.196c9da2.js";import{T as R,a as k}from"./constants.dd61e0d4.js";import{u as ce}from"./use-login-check.e01c4832.js";import"./SVGUserGroup.adcc3976.js";import"./index.891e0e8b.js";import"./index.a792be8b.js";import"./routes.73fc4946.js";import"./style.9d551dbf.js";import"./Skeleton.b37802c7.js";import"./Table.77c4b21e.js";import"./index.10dbff5d.js";import"./CSSTransition.a4d82697.js";import"./isEqual.5ca85d66.js";import"./lifecycle.32153b61.js";import"./debounce.3c601f71.js";import"./agora.7ea1cd24.js";import"./courseware-converting.d1c4ae45.js";import"./constants.1a2b4361.js";const de=({active:a,className:e="",...r})=>t("svg",{className:`${e} flat-icon ${a?"is-active":""}`,fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:t("path",{className:"flat-icon-stroke-color",d:"m14 8-2 2-2 2 2 2 2 2",stroke:"#5D6066",strokeLinejoin:"round",strokeWidth:"1.25"})});function ue(){const[a,e]=d.exports.useState(null),[r,u]=d.exports.useState(!1);d.exports.useEffect(()=>{if(a){let n=!1,h=0;const f=j(a,"wheel",l=>{l.deltaX!==0&&(n=!0,clearTimeout(h),h=window.setTimeout(()=>{n=!1},2e3)),n||(l.preventDefault(),a.scrollLeft+=l.deltaY*(l.deltaMode===1?18:1))},{passive:!1}),g=new ResizeObserver(()=>{const{scrollWidth:l,clientWidth:C}=a;u(l>C)});return g.observe(a),()=>{f(),g.disconnect()}}},[a]);const i=152,p=d.exports.useCallback(n=>a==null?void 0:a.scrollBy({left:-(n.shiftKey?5:1)*i,behavior:"smooth"}),[a]),m=d.exports.useCallback(n=>a==null?void 0:a.scrollBy({left:(n.shiftKey?5:1)*i,behavior:"smooth"}),[a]);return{isScrollable:r,makeScrollable:e,scrollLeft:p,scrollRight:m}}const Ee=G(P(function({classroomStore:e}){ce();const r=y(),u=e.whiteboardStore,i=d.exports.useContext(A),{confirm:p,...m}=z(e),[n,h]=d.exports.useState(!0);d.exports.useEffect(()=>{e.isCreator&&e.roomStatus===L.Idle&&e.startClass()},[e]);const{isScrollable:f,makeScrollable:g,scrollLeft:l,scrollRight:C}=ue();return t("div",{className:"small-class-page-container",children:t("div",{className:"small-class-realtime-container",children:c("div",{className:"small-class-realtime-box",children:[i?t(R,{left:b(),right:w(),showWindowsSystemBtn:i.showWindowsBtn,onClickWindowsSystemBtn:i.onClickWindowsSystemBtn,onDoubleClick:i.clickWindowMaximize}):t(R,{left:b(),right:w()}),T(),c("div",{className:"small-class-realtime-content",children:[c("div",{className:"small-class-realtime-content-container",children:[t(O,{classroomStore:e}),t(F,{classroomStore:e,handleOk:()=>e.toggleShareScreen(!0)}),t($,{classRoomStore:e,whiteboardStore:u})]}),I()]}),t(K,{isCreator:e.isCreator,...m}),t(Q,{isCreator:e.isCreator,isRemoteLogin:e.isRemoteLogin,roomStatus:e.roomStatus})]})})});function T(){return c("div",{className:"small-class-realtime-avatars-wrap-wrap",children:[t("div",{ref:g,className:"small-class-realtime-avatars-wrap",children:e.isJoinedRTC&&c("div",{className:"small-class-realtime-avatars","data-user-uuid":"[object Object]",children:[t(x,{avatarUser:e.users.creator,getPortal:e.getPortal,isAvatarUserCreator:!0,isCreator:e.isCreator,isDropTarget:e.isDropTarget(e.ownerUUID),rtcAvatar:e.users.creator&&e.rtc.getAvatar(e.users.creator.rtcUID),small:!0,updateDeviceState:e.updateDeviceState,userUUID:e.userUUID,onDoubleClick:()=>e.createMaximizedAvatarWindow(e.ownerUUID),onDragEnd:e.onDragEnd,onDragStart:e.onDragStart}),e.onStageUserUUIDs.map(N)]})}),c("div",{className:M("small-class-scroll-handles",{active:f}),children:[t("button",{className:"small-class-scroll-handle is-left",title:"press shift to scroll 5x faster",onClick:l,children:t("span",{className:"small-class-scroll-handle-btn",children:t(de,{active:!0})})}),t("button",{className:"small-class-scroll-handle is-right",title:"press shift to scroll 5x faster",onClick:C,children:t("span",{className:"small-class-scroll-handle-btn",children:t(oe,{active:!0})})})]})]})}function b(){var o,s;return c(U,{children:[t(q,{}),t(H,{networkQuality:e.networkQuality}),e.isCreator?((o=e.roomInfo)==null?void 0:o.beginTime)&&t(J,{beginTime:e.roomInfo.beginTime,roomStatus:e.roomStatus}):t(X,{roomStatus:e.roomStatus,roomType:(s=e.roomInfo)==null?void 0:s.roomType})]})}function w(){return c(U,{children:[u.allowDrawing&&!e.isRemoteScreenSharing&&t(v,{icon:t(Y,{active:e.isScreenSharing}),title:r("share-screen.self"),onClick:()=>{window.isElectron?e.isScreenSharing?e.toggleShareScreen(!1):e.toggleShareScreenPicker(!0):e.toggleShareScreen()}}),e.isCreator&&t(Z,{isRecording:e.isRecording,loading:e.isRecordingLoading,onClick:()=>{e.toggleRecording({onStop(){V.success(r("recording-completed-tips"))}})}}),e.whiteboardStore.allowDrawing&&t(_,{classroom:e}),t(ee,{roomInfo:e.roomInfo}),t(te,{classroom:e}),!(i!=null&&i.showWindowsBtn)&&t(v,{icon:t(ae,{}),title:r("exit"),onClick:()=>p(ie.ExitButton)}),i!=null&&i.showWindowsBtn?null:t(k,{}),t(v,{icon:n?t(ne,{}):t(se,{}),title:r(n?"side-panel.hide":"side-panel.show"),onClick:()=>{h(o=>!o),u.setRightSideClose(n)}}),(i==null?void 0:i.showWindowsBtn)&&t(k,{})]})}function I(){return t(re,{chatSlot:t(le,{classRoomStore:e}),isShow:n,isVideoOn:!1,videoSlot:null})}function N(o){const s=e.users.cachedUsers.get(o);return t(x,{avatarUser:s,getPortal:e.getPortal,isAvatarUserCreator:!1,isCreator:e.isCreator,isDropTarget:e.isDropTarget(o),rtcAvatar:s&&e.rtc.getAvatar(s.rtcUID),small:!0,updateDeviceState:(W,B,S)=>{var D;const E=u.isWritable||!s||s.userUUID===e.ownerUUID||s.userUUID!==((D=e.users.currentUser)==null?void 0:D.userUUID)?S:s.mic;e.updateDeviceState(W,B,E)},userUUID:e.userUUID,onDoubleClick:()=>s&&e.createMaximizedAvatarWindow(s.userUUID),onDragEnd:e.onDragEnd,onDragStart:e.onDragStart},o)}}));export{Ee as SmallClassPage,Ee as default};
//# sourceMappingURL=index.5c2733e0.js.map
