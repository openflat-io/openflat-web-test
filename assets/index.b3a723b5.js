import{k as r,dr as m,ds as F,dt as _,aZ as N,m as s,q as e,du as E,bc as u,A as x,dv as k,dw as I,dx as L,dy as P,b8 as V,b9 as Z,ba as A,bG as H,cA as M,bd as U,be as z,bf as G,bg as $}from"./index.43c4ffc0.js";import{u as y,g as D}from"./routes.73fc4946.js";import{j as B}from"./join-room-handler.9b9ed9e0.js";var W=function(a){r.exports.useEffect(a,[])};const O=W;var J=function(a){var n=r.exports.useRef(a);n.current=a,O(function(){return function(){return n.current()}})};const T=J;var q=function(a){var n=r.exports.useRef(0),i=r.exports.useState(a),o=i[0],l=i[1],c=r.exports.useCallback(function(t){cancelAnimationFrame(n.current),n.current=requestAnimationFrame(function(){l(t)})},[]);return T(function(){cancelAnimationFrame(n.current)}),[o,c]};const Y=q;var K=function(a,n){a===void 0&&(a=1/0),n===void 0&&(n=1/0);var i=Y({width:m?window.innerWidth:a,height:m?window.innerHeight:n}),o=i[0],l=i[1];return r.exports.useEffect(function(){if(m){var c=function(){l({width:window.innerWidth,height:window.innerHeight})};return F(window,"resize",c),function(){_(window,"resize",c)}}},[]),o};const Q=K,X=!0,ee="data:image/svg+xml;charset=utf8,%3csvg width='100' height='40' viewBox='0 0 250 100' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M68 32a8 8 0 0 1 8-8h24v8a8 8 0 0 1-8 8H68v-8ZM52 50a8 8 0 0 1 8-8h24v8a8 8 0 0 1-8 8H52v-8Zm0 10a8 8 0 1 0 8 8v-8h-8Zm76-36a8 8 0 0 0-8 8h16v-8h-8Zm4 10h-12v6h-4v8h4v28h12V48h4v-8h-4v-6Zm12-10h-4v52h12V32a8 8 0 0 0-8-8Zm18 16h16a8 8 0 0 1 8 8v28h-22a8 8 0 0 1-8-8v-8a8 8 0 0 1 8-8h8v8h-4v8h6V48h-12v-8Zm28 36h12V48h4v-8h-4v-8a8 8 0 0 0-8-8h-4v52Z' fill='%233381FF'/%3e%3c/svg%3e",ne="data:image/svg+xml;charset=utf8,%3csvg width='72' height='72' xmlns='http://www.w3.org/2000/svg'%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath d='M18 42v8a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4v-8h0' stroke='%233381FF' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'/%3e%3cpath d='M18 50a4 4 0 0 0 4 4h28a4 4 0 0 0 4-4H18Zm7.707-16.293 9.586 9.586a1 1 0 0 0 1.414 0l9.586-9.586A1 1 0 0 0 45.586 32H39V19a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v13h-6.586a1 1 0 0 0-.707 1.707Z' fill='%233381FF'/%3e%3c/g%3e%3c/svg%3e",oe="data:image/svg+xml;charset=utf8,%3csvg width='72' height='72' xmlns='http://www.w3.org/2000/svg'%3e%3cg fill='none' fill-rule='evenodd'%3e%3cpath fill='white' d='M12 12h48v48H12z'/%3e%3crect stroke='%233381FF' stroke-width='3' stroke-linejoin='round' x='18' y='18' width='36' height='36' rx='4'/%3e%3cpath stroke='%233381FF' stroke-width='3' stroke-linecap='round' stroke-linejoin='round' d='M30 41h12m-6-6v12'/%3e%3cpath d='M50 18a4 4 0 0 1 4 4v8H18v-8a4 4 0 0 1 4-4Zm-25 4a2 2 0 1 0 0 4 2 2 0 0 0 0-4Zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z' fill='%233381FF'/%3e%3c/g%3e%3c/svg%3e";function te({isLogin:a,avatar:n,roomUUID:i,privacyURL:o,serviceURL:l,joinRoom:c}){const t=N(),p=y(),h=r.exports.useMemo(()=>`x-agora-flat-client://joinRoom?roomUUID=${i}`,[i]);return s("div",{className:"join-page-container",children:[e("iframe",{height:"0",src:h,style:{display:"none"},title:"[hidden]",width:"0"}),s("div",{className:"join-page-header-container",children:[e("img",{alt:"app logo",src:ee}),a?e(E,{className:"join-page-header-avatar",icon:e("img",{src:n}),size:32}):e("div",{className:"join-page-header-btn",onClick:()=>{i&&(sessionStorage.setItem("roomUUID",i),p(u.LoginPage))},children:t("login")})]}),s("div",{className:"join-page-content-container",children:[e("div",{className:"join-page-content-title",children:t("select-the-way-to-join-room")}),s("div",{className:"join-page-content-btn-container",children:[s(x,{className:"join-page-content-btn",onClick:()=>window.open(k,"_blank"),children:[e("img",{alt:"download icon",src:ne}),s("div",{className:"join-page-content-text-container",children:[e("div",{className:"join-page-content-text",children:t("download-desktop-application")}),e("span",{className:"join-page-content-sub-text",children:t("download-desktop-application-tips")})]})]}),s(x,{className:"join-page-content-btn",onClick:c,children:[e("img",{alt:"join icon",src:oe}),s("div",{className:"join-page-content-text-container",children:[e("div",{className:"join-page-content-text",children:t("web-version-join-room")}),e("span",{className:"join-page-content-sub-text",children:t("web-version-join-room-tips")})]})]})]}),e("div",{className:"join-page-content-divider",children:e("span",{children:t("or")})}),s("div",{className:"join-page-content-container-open-flat",children:[e("span",{children:t("already-installed-tips")}),e("a",{href:h,children:t("open-now")})]})]}),s("div",{className:"join-page-footer-container",children:[e("a",{href:o,rel:"noreferrer",target:"_blank",children:t("privacy-agreement")}),e("span",{children:"\uFF5C"}),e("a",{href:l,rel:"noreferrer",target:"_blank",children:t("service-policy")})]})]})}function ae({roomUUID:a,privacyURL:n,serviceURL:i}){const o=N(),l=r.exports.useMemo(()=>`x-agora-flat-client://joinRoom?roomUUID=${a}`,[a]),c=r.exports.useCallback(()=>{window.location.href=l},[l]),t=()=>{window.location.href=k};return r.exports.useEffect(()=>{c()},[c]),s("div",{className:"join-page-mobile-container",children:[e("iframe",{height:"0",src:l,style:{display:"none"},title:`join ${o("app-name")}`,width:"0"}),e("div",{className:"join-page-mobile-effect"}),e("div",{className:"join-page-mobile-header",children:e("div",{className:"join-page-mobile-app-icon",children:e("img",{alt:"flat-logo",src:I})})}),s("div",{className:"join-page-mobile-big-btns",children:[s("button",{className:"join-page-mobile-big-btn",onClick:c,children:[o("open")," ",o("app-name")]}),s("button",{className:"join-page-mobile-big-btn secondary",onClick:t,children:[o("download")," ",o("app-name")]})]}),s("div",{className:"join-page-mobile-footer",children:[e("a",{href:n,rel:"noreferrer",target:"_blank",children:o("privacy-agreement")}),e("span",{children:"\uFF5C"}),e("a",{href:i,rel:"noreferrer",target:"_blank",children:o("service-policy")})]}),L&&s("div",{className:"join-page-mobile-wechat-overlay",children:[e("img",{alt:"[open-in-browser]",src:P}),e("strong",{children:o("open-in-browser")})]})]})}const le=V(function(){var w,b;const n=Z(),i=y(),o=r.exports.useContext(A),l=r.exports.useContext(H),[c,t]=r.exports.useState(!1),{width:p}=Q(1080),h=M(),{roomUUID:d}=h;r.exports.useEffect(()=>l.configure(),[]),r.exports.useEffect(()=>{async function S(){var j;if((j=o.userInfo)==null?void 0:j.token)try{const g=await D();t(X?g.hasPhone:!0)}catch(g){console.error(g)}}S()},[]);async function C(){c&&d?window.isElectron?await B(d,i):i(u.DevicesTestPage,{roomUUID:d}):(sessionStorage.setItem("roomUUID",d),i(u.LoginPage))}const R=p<=480,v=n.startsWith("zh")?U:z,f=n.startsWith("zh")?G:$;return e("div",{children:R?e(ae,{privacyURL:v,roomUUID:d,serviceURL:f}):e(te,{avatar:(b=(w=o.userInfo)==null?void 0:w.avatar)!=null?b:"",isLogin:c,joinRoom:C,privacyURL:v,roomUUID:d,serviceURL:f})})});export{le as JoinPage,le as default};
//# sourceMappingURL=index.b3a723b5.js.map
