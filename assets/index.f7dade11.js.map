{"version":3,"file":"index.f7dade11.js","sources":["../../../../packages/flat-pages/src/CloudStoragePage/index.tsx"],"sourcesContent":["import \"./style.less\";\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { CloudStorageContainer } from \"flat-components\";\nimport { CloudStorageStore } from \"@netless/flat-stores\";\nimport { useLoginCheck } from \"../utils/use-login-check\";\nimport { PageStoreContext } from \"../components/StoreProvider\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nexport interface CloudStoragePageProps {}\n\nexport const CloudStoragePage = observer<CloudStoragePageProps>(function CloudStoragePage() {\n    useLoginCheck();\n\n    const history = useHistory();\n    const location = useLocation();\n\n    const [store] = useState(\n        () =>\n            new CloudStorageStore({\n                compact: false,\n                // eslint-disable-next-line @typescript-eslint/no-empty-function\n                insertCourseware: () => {},\n            }),\n    );\n    const path = useMemo(() => new URLSearchParams(location.search).get(\"path\"), [location.search]);\n\n    const pushHistory = useCallback(\n        (path: string): void => {\n            const search = new URLSearchParams({ path }).toString();\n            history.push({ search });\n        },\n        [history],\n    );\n\n    useEffect(() => {\n        if (path !== null) {\n            store.onParentDirectoryPathClick(path);\n        }\n    }, [path, store]);\n\n    useEffect(() => store.initialize(), [store]);\n\n    const pageStore = useContext(PageStoreContext);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    useEffect(() => pageStore.configure(), []);\n\n    return <CloudStorageContainer path={path} pushHistory={pushHistory} store={store} />;\n});\n\nexport default CloudStoragePage;\n"],"names":["CloudStoragePage","observer","useLoginCheck","history","useHistory","location","useLocation","store","useState","CloudStorageStore","compact","insertCourseware","path","useMemo","URLSearchParams","search","get","pushHistory","useCallback","toString","push","useEffect","onParentDirectoryPathClick","initialize","pageStore","useContext","PageStoreContext","configure","CloudStorageContainer"],"mappings":"sWAWaA,MAAAA,EAAmBC,EAAgC,UAA4B,CAC3EC,IAEb,MAAMC,EAAUC,IACVC,EAAWC,IAEX,CAACC,CAAD,EAAUC,mBACZ,IACI,IAAIC,EAAkB,CAClBC,QAAS,GAETC,iBAAkB,IAAM,CAAE,CAH9B,CAAA,CAFgB,EAQlBC,EAAOC,EAAAA,QAAAA,QAAQ,IAAM,IAAIC,gBAAgBT,EAASU,MAA7B,EAAqCC,IAAI,MAAzC,EAAkD,CAACX,EAASU,MAAV,CAAzD,EAEdE,EAAcC,sBACfN,GAAuB,CACdG,MAAAA,EAAS,IAAID,gBAAgB,CAAEF,KAAAA,CAAAA,CAAtB,EAA8BO,SAA7C,EACAhB,EAAQiB,KAAK,CAAEL,OAAAA,CAAAA,CAAf,CAAA,EAEJ,CAACZ,CAAD,CAL2B,EAQ/BkB,EAAAA,QAAAA,UAAU,IAAM,CACRT,IAAS,MACTL,EAAMe,2BAA2BV,CAAjC,CACH,EACF,CAACA,EAAML,CAAP,CAJM,EAMTc,EAAAA,QAAAA,UAAU,IAAMd,EAAMgB,WAAc,EAAA,CAAChB,CAAD,CAA3B,EAEHiB,MAAAA,EAAYC,qBAAWC,CAAD,EAG5BL,OAAAA,EAAAA,QAAAA,UAAU,IAAMG,EAAUG,UAAjB,EAA8B,CAA9B,CAAA,IAEDC,EAAD,CAAuB,KAAAhB,EAAY,YAAAK,EAA0B,MAAAV,CAAA,CAApE,CACH,CAtCuC"}