import{b8 as f,k as s,bm as y,d7 as B,q as r,cB as R,d8 as F,b2 as b,d9 as k,da as v,cA as w}from"./index.43c4ffc0.js";import{u as L}from"./use-login-check.e01c4832.js";import{e as p}from"./routes.73fc4946.js";import{E as P}from"./index.1445c18d.js";import{u as S}from"./lifecycle.32153b61.js";const V=f(function({roomUUID:o}){const[t,u]=s.exports.useState(!1),n=y(),a=S(),[c,m]=s.exports.useState();if(s.exports.useEffect(()=>{a(B(o)).then(({roomInfo:e})=>{m({title:e.title,type:e.roomType,beginTime:new Date(e.beginTime),endTime:new Date(e.endTime),isPeriodic:!1,region:e.region})}).catch(e=>{console.error(e),p(e),n.goBack()})},[o]),!c)return r(R,{});return r(P,{initialValues:c,loading:t,type:"ordinary",onSubmit:l});async function l(e){u(!0);try{await a(F({roomUUID:o,beginTime:e.beginTime.valueOf(),endTime:e.endTime.valueOf(),title:e.title,type:e.type})),b.success("\u4FEE\u6539\u6210\u529F"),n.goBack()}catch(d){console.error(d),p(d),u(!1)}}}),M=f(function({roomUUID:o,periodicUUID:t}){const[u,n]=s.exports.useState(!1),a=y(),c=S(),[m,l]=s.exports.useState(),[e,d]=s.exports.useState(0),[x,E]=s.exports.useState(0);if(s.exports.useEffect(()=>{c(k({roomUUID:o,periodicUUID:t,needOtherRoomTimeInfo:!0})).then(({roomInfo:i,previousPeriodicRoomBeginTime:g,nextPeriodicRoomEndTime:O})=>{l({title:i.title,type:i.roomType,beginTime:new Date(i.beginTime),endTime:new Date(i.endTime),isPeriodic:!1,region:i.region}),d(g),E(O)}).catch(i=>{console.error(i),p(i),a.goBack()})},[o,t]),!m)return r(R,{});return r(P,{initialValues:m,loading:u,nextPeriodicRoomEndTime:x,previousPeriodicRoomBeginTime:e,type:"periodicSub",onSubmit:h});async function h(i){n(!0);try{await c(v({roomUUID:o,periodicUUID:t,beginTime:i.beginTime.valueOf(),endTime:i.endTime.valueOf()})),b.success("\u4FEE\u6539\u6210\u529F"),a.goBack()}catch(g){console.error(g),p(g),n(!1)}}}),N=f(function(){L();const{roomUUID:o,periodicUUID:t}=w();return t?r(M,{periodicUUID:t,roomUUID:o}):r(V,{roomUUID:o})});export{N as ModifyOrdinaryRoomPage,N as default};
//# sourceMappingURL=index.4f58e172.js.map
