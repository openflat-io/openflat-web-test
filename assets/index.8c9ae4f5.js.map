{"version":3,"file":"index.8c9ae4f5.js","sources":["../../../../node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/es/asn/GithubFilled.js","../../../../node_modules/.pnpm/@ant-design+icons@4.7.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/@ant-design/icons/es/icons/GithubFilled.js","../../../../node_modules/.pnpm/@ant-design+icons-svg@4.2.1/node_modules/@ant-design/icons-svg/es/asn/WechatFilled.js","../../../../node_modules/.pnpm/@ant-design+icons@4.7.0_sfoxds7t5ydpegc3knd667wn6m/node_modules/@ant-design/icons/es/icons/WechatFilled.js","../../../../packages/flat-components/src/components/SettingPage/AppearancePicker/icons/light.svg","../../../../packages/flat-components/src/components/SettingPage/AppearancePicker/icons/dark.svg","../../../../packages/flat-components/src/components/SettingPage/AppearancePicker/icons/auto.svg","../../../../packages/flat-components/src/components/SettingPage/AppearancePicker/index.tsx","../../../../packages/flat-pages/src/UserSettingPage/GeneralSettingPage/ConfirmButtons.tsx","../../../../packages/flat-pages/src/UserSettingPage/GeneralSettingPage/UploadAvatar.tsx","../../../../packages/flat-pages/src/UserSettingPage/GeneralSettingPage/binding/WeChat.tsx","../../../../packages/flat-pages/src/UserSettingPage/GeneralSettingPage/binding/index.ts","../../../../packages/flat-pages/src/UserSettingPage/GeneralSettingPage/binding/GitHub.tsx","../../../../packages/flat-pages/src/UserSettingPage/GeneralSettingPage/index.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar GithubFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z\" } }] }, \"name\": \"github\", \"theme\": \"filled\" };\nexport default GithubFilled;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport GithubFilledSvg from \"@ant-design/icons-svg/es/asn/GithubFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar GithubFilled = function GithubFilled(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: GithubFilledSvg\n  }));\n};\n\nGithubFilled.displayName = 'GithubFilled';\nexport default /*#__PURE__*/React.forwardRef(GithubFilled);","// This icon file is generated automatically.\nvar WechatFilled = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M690.1 377.4c5.9 0 11.8.2 17.6.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6a21.5 21.5 0 019.1 17.6c0 2.4-.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-.1 17.8-.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8zm-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1zm-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1zm586.8 415.6c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7a9 9 0 006.4-2.6 9 9 0 002.6-6.4c0-2.2-.9-4.4-1.4-6.6-.3-1.2-7.6-28.3-12.2-45.3-.5-1.9-.9-3.8-.9-5.7.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9zm179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9a36.08 36.08 0 01-36 35.9z\" } }] }, \"name\": \"wechat\", \"theme\": \"filled\" };\nexport default WechatFilled;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport WechatFilledSvg from \"@ant-design/icons-svg/es/asn/WechatFilled\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar WechatFilled = function WechatFilled(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: WechatFilledSvg\n  }));\n};\n\nWechatFilled.displayName = 'WechatFilled';\nexport default /*#__PURE__*/React.forwardRef(WechatFilled);","export default \"data:image/svg+xml;charset=utf8,%3csvg width='120' height='80' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='120' height='80' rx='4' fill='%23ECF0F7'/%3e%3cpath d='M1 4a3 3 0 0 1 3-3h12v78H4a3 3 0 0 1-3-3V4Z' fill='%230A1933'/%3e%3crect x='24' y='24' width='88' height='48' rx='2' fill='white'/%3e%3crect x='24' y='8' width='24' height='12' rx='2' fill='white'/%3e%3crect x='52' y='8' width='24' height='12' rx='2' fill='white'/%3e%3crect x='80' y='8' width='24' height='12' rx='2' fill='white'/%3e%3cpath d='M119.5 76a3.5 3.5 0 0 1-3.5 3.5H4A3.5 3.5 0 0 1 .5 76V4A3.5 3.5 0 0 1 4 .5h112a3.5 3.5 0 0 1 3.5 3.5v72Z' stroke='%235D6066'/%3e%3c/svg%3e\";","export default \"data:image/svg+xml;charset=utf8,%3csvg width='120' height='80' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='120' height='80' rx='4' fill='%2303060D'/%3e%3cpath d='M1 4a3 3 0 0 1 3-3h12v78H4a3 3 0 0 1-3-3V4Z' fill='%2314181E'/%3e%3crect x='24' y='24' width='88' height='48' rx='2' fill='%23272A30'/%3e%3crect x='24' y='8' width='24' height='12' rx='2' fill='%23272A30'/%3e%3crect x='52' y='8' width='24' height='12' rx='2' fill='%23272A30'/%3e%3crect x='80' y='8' width='24' height='12' rx='2' fill='%23272A30'/%3e%3cpath d='M119.5 76a3.5 3.5 0 0 1-3.5 3.5H4A3.5 3.5 0 0 1 .5 76V4A3.5 3.5 0 0 1 4 .5h112a3.5 3.5 0 0 1 3.5 3.5v72Z' stroke='%235D6066'/%3e%3c/svg%3e\";","export default \"data:image/svg+xml;charset=utf8,%3csvg width='120' height='80' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cmask id='a' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='0' y='0' width='60' height='80'%3e%3cpath d='M0 4a4 4 0 0 1 4-4h56v80H4a4 4 0 0 1-4-4V4Z' fill='%23ECF0F7'/%3e%3c/mask%3e%3cg mask='url(%23a)'%3e%3cpath d='M0 4a4 4 0 0 1 4-4h56v80H4a4 4 0 0 1-4-4V4Z' fill='%23ECF0F7'/%3e%3crect x='10.5' y='10.5' width='119' height='79' rx='3.5' fill='%23ECF0F7' stroke='%23D5D9E0'/%3e%3cpath d='M11 14a3 3 0 0 1 3-3h12v78H14a3 3 0 0 1-3-3V14Z' fill='%230A1933'/%3e%3crect x='34' y='34' width='88' height='48' rx='2' fill='white'/%3e%3crect x='34' y='18' width='24' height='12' rx='2' fill='white'/%3e%3c/g%3e%3cmask id='b' style='mask-type:alpha' maskUnits='userSpaceOnUse' x='60' y='0' width='60' height='80'%3e%3cpath d='M120 4a4 4 0 0 0-4-4H60v80h56a4 4 0 0 0 4-4V4Z' fill='%23ECF0F7'/%3e%3c/mask%3e%3cg mask='url(%23b)'%3e%3cpath d='M120 76a4 4 0 0 1-4 4H60V0h56a4 4 0 0 1 4 4v72Z' fill='%2314181E'/%3e%3crect x='70.5' y='10.5' width='119' height='79' rx='3.5' fill='%2303060D' stroke='%23383B42'/%3e%3cpath d='M71 14a3 3 0 0 1 3-3h12v78H74a3 3 0 0 1-3-3V14Z' fill='%2314181E'/%3e%3crect x='94' y='34' width='88' height='48' rx='2' fill='%23272A30'/%3e%3crect x='94' y='18' width='24' height='12' rx='2' fill='%23272A30'/%3e%3c/g%3e%3cpath d='M119.5 76a3.5 3.5 0 0 1-3.5 3.5H4A3.5 3.5 0 0 1 .5 76V4A3.5 3.5 0 0 1 4 .5h112a3.5 3.5 0 0 1 3.5 3.5v72Z' stroke='%235D6066'/%3e%3c/svg%3e\";","import lightSVG from \"./icons/light.svg\";\nimport darkSVG from \"./icons/dark.svg\";\nimport autoSVG from \"./icons/auto.svg\";\nimport \"./style.less\";\n\nimport React from \"react\";\nimport { useTranslate } from \"@netless/flat-i18n\";\nimport { Radio, RadioChangeEvent } from \"antd\";\nimport { FlatPrefersColorScheme } from \"../../FlatThemeProvider\";\n\nexport interface AppearancePickerProps {\n    defaultValue: FlatPrefersColorScheme;\n    changeAppearance: (event: RadioChangeEvent) => void;\n}\n\nexport const AppearancePicker: React.FC<AppearancePickerProps> = ({\n    defaultValue,\n    changeAppearance,\n}) => {\n    const t = useTranslate();\n    return (\n        <div className=\"appearance-picker-container\">\n            <Radio.Group defaultValue={defaultValue} onChange={changeAppearance}>\n                <Radio value={\"light\"}>\n                    <div className=\"appearance-picker-option\">\n                        <img src={lightSVG} />\n                        <span>{t(\"app-appearance-light\")}</span>\n                    </div>\n                </Radio>\n                <Radio value={\"dark\"}>\n                    <div className=\"appearance-picker-option\">\n                        <img src={darkSVG} />\n                        <span>{t(\"app-appearance-dark\")}</span>\n                    </div>\n                </Radio>\n                <Radio value={\"auto\"}>\n                    <div className=\"appearance-picker-option\">\n                        <img src={autoSVG} />\n                        <span>{t(\"app-appearance-auto\")}</span>\n                    </div>\n                </Radio>\n            </Radio.Group>\n        </div>\n    );\n};\n","import React, { useCallback, useState } from \"react\";\nimport { Button } from \"antd\";\nimport { useTranslate } from \"@netless/flat-i18n\";\nimport { useSafePromise } from \"../../utils/hooks/lifecycle\";\n\nexport interface ConfirmButtonsProps {\n    onConfirm: () => Promise<void>;\n}\n\nexport const ConfirmButtons: React.FC<ConfirmButtonsProps> = ({ onConfirm }) => {\n    const sp = useSafePromise();\n    const t = useTranslate();\n    const [loading, setLoading] = useState(false);\n    const [phase, setPhase] = useState<\"idle\" | \"confirm\">(\"idle\");\n\n    const confirm = useCallback(async () => {\n        setLoading(true);\n        await sp(onConfirm().catch(console.error));\n        setLoading(false);\n        setPhase(\"idle\");\n    }, [onConfirm, sp]);\n\n    if (phase === \"idle\") {\n        return (\n            <Button type=\"link\" onClick={() => setPhase(\"confirm\")}>\n                {t(\"modify\")}\n            </Button>\n        );\n    } else {\n        return (\n            <>\n                <Button disabled={loading} loading={loading} type=\"primary\" onClick={confirm}>\n                    {t(\"confirm\")}\n                </Button>\n                <Button onClick={() => setPhase(\"idle\")}>{t(\"cancel\")}</Button>\n            </>\n        );\n    }\n};\n","import Axios from \"axios\";\nimport React, { ChangeEvent, useContext, useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\nimport { message, Region } from \"flat-components\";\nimport { observer } from \"mobx-react-lite\";\nimport { FlatI18nTFunction, useTranslate } from \"@netless/flat-i18n\";\n\nimport { GlobalStoreContext } from \"../../components/StoreProvider\";\nimport { useSafePromise } from \"../../utils/hooks/lifecycle\";\nimport { CLOUD_STORAGE_OSS_ALIBABA_CONFIG } from \"../../constants/process\";\nimport { uploadAvatarFinish, uploadAvatarStart } from \"@netless/flat-server-api\";\nimport { globalStore } from \"@netless/flat-stores\";\n\nexport interface UploadAvatarProps {\n    onUpload?: (file: File) => Promise<void>;\n}\n\nexport const UploadAvatar = observer<UploadAvatarProps>(function UploadAvatar({ onUpload }) {\n    const globalStore = useContext(GlobalStoreContext);\n    const sp = useSafePromise();\n    const t = useTranslate();\n\n    const [loading, setLoading] = useState(false);\n    const [imageUrl, setImageUrl] = useState(globalStore.userInfo?.avatar || \"\");\n\n    useEffect(() => {\n        if (globalStore.userInfo?.avatar) {\n            setImageUrl(globalStore.userInfo.avatar);\n        }\n    }, [globalStore.userInfo?.avatar]);\n\n    const updateInput = async (event: ChangeEvent<HTMLInputElement>): Promise<void> => {\n        const file: File | undefined = (event.target.files || [])[0];\n        if (file) {\n            setLoading(true);\n            sp(fileToDataUrl(file)).then(setImageUrl);\n            if (onUpload) {\n                await sp(onUpload(file).catch(console.error));\n            }\n            setLoading(false);\n        } else {\n            setImageUrl(globalStore.userInfo?.avatar || \"\");\n        }\n    };\n\n    return (\n        <div\n            className={classNames(\"general-setting-user-avatar\", {\n                \"is-loading\": loading,\n            })}\n        >\n            <input\n                accept=\".png,.jpg,.jpeg\"\n                className=\"user-avatar-input\"\n                type=\"file\"\n                onChange={updateInput}\n            />\n            {imageUrl ? (\n                <img alt=\"avatar\" className=\"user-avatar-image\" src={imageUrl} />\n            ) : (\n                <span className=\"user-avatar-text\">{t(\"upload-avatar\")}</span>\n            )}\n        </div>\n    );\n});\n\nfunction fileToDataUrl(file: File): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n    });\n}\n\nconst USER_AVATAR_SIZE_LIMIT = 5242880;\n\nexport async function uploadAvatar(file: File, t: FlatI18nTFunction): Promise<void> {\n    if (file.size >= USER_AVATAR_SIZE_LIMIT) {\n        message.info(t(\"upload-avatar-size-limit\"));\n        throw new Error(\"upload avatar size limit\");\n    }\n\n    const ticket = await uploadAvatarStart(\n        file.name,\n        file.size,\n        globalStore.region ?? Region.CN_HZ,\n    );\n\n    const formData = new FormData();\n    const encodedFileName = encodeURIComponent(file.name);\n    formData.append(\"key\", ticket.filePath);\n    formData.append(\"name\", file.name);\n    formData.append(\"policy\", ticket.policy);\n    formData.append(\"OSSAccessKeyId\", CLOUD_STORAGE_OSS_ALIBABA_CONFIG.accessKey);\n    formData.append(\"success_action_status\", \"200\");\n    formData.append(\"callback\", \"\");\n    formData.append(\"signature\", ticket.signature);\n    formData.append(\n        \"Content-Disposition\",\n        `attachment; filename=\"${encodedFileName}\"; filename*=UTF-8''${encodedFileName}`,\n    );\n    formData.append(\"file\", file);\n\n    await Axios.post(ticket.policyURL, formData, {\n        headers: {\n            \"Content-Type\": \"multipart/form-data\",\n        },\n    });\n\n    const { avatarURL } = await uploadAvatarFinish(ticket.fileUUID);\n\n    globalStore.updateUserAvatar(avatarURL);\n}\n","import classNames from \"classnames\";\nimport { v4 } from \"uuid\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslate } from \"@netless/flat-i18n\";\nimport { message, Modal } from \"antd\";\nimport { WechatFilled } from \"@ant-design/icons\";\n\nimport { getQRCodeURL } from \"../../../LoginPage/WeChatLogin\";\nimport {\n    setBindingAuthUUID,\n    bindingProcess,\n    removeBinding,\n    LoginPlatform,\n    FLAT_SERVER_USER_BINDING,\n} from \"@netless/flat-server-api\";\nimport { useSafePromise } from \"../../../utils/hooks/lifecycle\";\nimport { errorTips } from \"flat-components\";\nimport { GlobalStore } from \"@netless/flat-stores\";\n\nexport interface BindingWeChatProps {\n    isBind: boolean;\n    onRefresh: () => void;\n    globalStore: GlobalStore;\n}\n\nexport const BindWeChat: React.FC<BindingWeChatProps> = ({ isBind, onRefresh, globalStore }) => {\n    const sp = useSafePromise();\n    const t = useTranslate();\n    const [authUUID, setAuthUUID] = useState(\"\");\n    const [qrCodeURL, setQRCodeURL] = useState(\"\");\n\n    const cancel = useCallback((): void => {\n        setAuthUUID(\"\");\n        setQRCodeURL(\"\");\n        onRefresh();\n    }, [onRefresh]);\n\n    useEffect(() => {\n        let timer = NaN;\n        async function waitUntilBindFinish(): Promise<void> {\n            const result = await sp(bindingProcess(authUUID));\n            if (result.processing) {\n                timer = window.setTimeout(waitUntilBindFinish, 2000);\n            } else {\n                if (!result.status) {\n                    message.info(t(\"bind-wechat-failed\"));\n                }\n                cancel();\n            }\n        }\n        if (qrCodeURL && authUUID) {\n            waitUntilBindFinish();\n            return () => {\n                Number.isNaN(timer) || window.clearTimeout(timer);\n            };\n        }\n        return;\n    }, [authUUID, cancel, onRefresh, qrCodeURL, sp, t]);\n\n    const bindWeChat = async (): Promise<void> => {\n        const authUUID = v4();\n        setAuthUUID(authUUID);\n        await sp(setBindingAuthUUID(authUUID));\n        setQRCodeURL(getQRCodeURL(authUUID, FLAT_SERVER_USER_BINDING.WECHAT_CALLBACK));\n    };\n\n    const unbind = (): void => {\n        Modal.confirm({\n            content: t(\"unbind-confirm\"),\n            onOk: async () => {\n                try {\n                    const { token } = await sp(removeBinding(LoginPlatform.WeChat));\n                    globalStore.updateUserToken(token);\n                    onRefresh();\n                    message.info(t(\"unbind-success\"));\n                } catch (err) {\n                    errorTips(err);\n                }\n            },\n        });\n    };\n\n    return (\n        <>\n            <span\n                className={classNames(\"binding-wechat\", {\n                    \"is-bind\": isBind,\n                })}\n                title={isBind ? t(\"is-bind\") : t(\"not-bind\")}\n                onClick={isBind ? unbind : bindWeChat}\n            >\n                <WechatFilled style={{ color: \"#fff\" }} />\n            </span>\n            <Modal\n                centered\n                destroyOnClose\n                className=\"binding-wechat-modal\"\n                footer={null}\n                open={!!qrCodeURL}\n                title={t(\"bind-wechat\")}\n                onCancel={cancel}\n            >\n                <iframe\n                    className=\"binding-wechat-iframe\"\n                    frameBorder=\"0\"\n                    scrolling=\"no\"\n                    src={qrCodeURL}\n                    title=\"wechat\"\n                />\n            </Modal>\n        </>\n    );\n};\n","import { useCallback, useEffect, useState } from \"react\";\n\nimport { listBindings, ListBindingsResult } from \"@netless/flat-server-api\";\nimport { useSafePromise } from \"../../../utils/hooks/lifecycle\";\n\nconst defaultBindings: ListBindingsResult = {\n    wechat: false,\n    phone: false,\n    agora: false,\n    apple: false,\n    github: false,\n    google: false,\n};\n\nexport function useBindingList(): { bindings: ListBindingsResult; refresh: () => void } {\n    const sp = useSafePromise();\n    const [bindings, setBindings] = useState<ListBindingsResult>(defaultBindings);\n\n    const refresh = useCallback(() => {\n        sp(listBindings()).then(setBindings);\n    }, [sp]);\n\n    useEffect(refresh, [refresh]);\n\n    return { bindings, refresh };\n}\n","import { v4 } from \"uuid\";\nimport classNames from \"classnames\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { message, Modal } from \"antd\";\nimport { useTranslate } from \"@netless/flat-i18n\";\nimport { GithubFilled } from \"@ant-design/icons\";\n\nimport { GlobalStore } from \"@netless/flat-stores\";\nimport { useSafePromise } from \"../../../utils/hooks/lifecycle\";\nimport {\n    bindingProcess,\n    LoginPlatform,\n    removeBinding,\n    setBindingAuthUUID,\n    FLAT_SERVER_USER_BINDING,\n} from \"@netless/flat-server-api\";\nimport { getGithubURL } from \"../../../LoginPage/githubLogin\";\nimport { errorTips } from \"flat-components\";\n\nexport interface BindGitHubProps {\n    isBind: boolean;\n    onRefresh: () => void;\n    globalStore: GlobalStore;\n}\n\nexport const BindGitHub: React.FC<BindGitHubProps> = ({ isBind, onRefresh, globalStore }) => {\n    const sp = useSafePromise();\n    const t = useTranslate();\n    const [authUUID, setAuthUUID] = useState(\"\");\n\n    const cancel = useCallback((): void => {\n        setAuthUUID(\"\");\n        onRefresh();\n    }, [onRefresh]);\n\n    useEffect(() => {\n        let timer = NaN;\n        async function waitUntilBindFinish(): Promise<void> {\n            const result = await sp(bindingProcess(authUUID));\n            if (result.processing) {\n                timer = window.setTimeout(waitUntilBindFinish, 2000);\n            } else {\n                if (!result.status) {\n                    message.info(t(\"bind-wechat-failed\"));\n                }\n                cancel();\n            }\n        }\n        if (authUUID) {\n            waitUntilBindFinish();\n            return () => {\n                Number.isNaN(timer) || window.clearTimeout(timer);\n            };\n        }\n        return;\n    }, [authUUID, cancel, onRefresh, sp, t]);\n\n    const bindGitHub = async (): Promise<void> => {\n        const authUUID = v4();\n        setAuthUUID(authUUID);\n        await sp(setBindingAuthUUID(authUUID));\n        void window.open(getGithubURL(authUUID, FLAT_SERVER_USER_BINDING.GITHUB_CALLBACK));\n    };\n\n    const unbind = (): void => {\n        Modal.confirm({\n            content: t(\"unbind-confirm\"),\n            onOk: async () => {\n                try {\n                    const { token } = await sp(removeBinding(LoginPlatform.Github));\n                    globalStore.updateUserToken(token);\n                    onRefresh();\n                    message.info(t(\"unbind-success\"));\n                } catch (err) {\n                    errorTips(err);\n                }\n            },\n        });\n    };\n\n    return (\n        <span\n            className={classNames(\"binding-github\", {\n                \"is-bind\": isBind,\n            })}\n            title={isBind ? t(\"is-bind\") : t(\"not-bind\")}\n            onClick={isBind ? unbind : bindGitHub}\n        >\n            <GithubFilled style={{ color: \"#fff\" }} />\n        </span>\n    );\n};\n","import type { CheckboxChangeEvent } from \"antd/lib/checkbox\";\n\nimport \"./index.less\";\n\nimport React, { useContext, useState } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport { Button, Checkbox, Input, message, Modal, Radio } from \"antd\";\nimport { FlatPrefersColorScheme, AppearancePicker, errorTips } from \"flat-components\";\nimport { UserSettingLayoutContainer } from \"../UserSettingLayoutContainer\";\nimport { FlatI18n, useLanguage, useTranslate } from \"@netless/flat-i18n\";\n\nimport { PreferencesStoreContext, GlobalStoreContext } from \"../../components/StoreProvider\";\nimport { useSafePromise } from \"../../utils/hooks/lifecycle\";\nimport { deleteAccount, deleteAccountValidate, loginCheck, rename } from \"@netless/flat-server-api\";\nimport { ConfirmButtons } from \"./ConfirmButtons\";\nimport { uploadAvatar, UploadAvatar } from \"./UploadAvatar\";\nimport { BindWeChat } from \"./binding/WeChat\";\nimport { useBindingList } from \"./binding\";\nimport { BindGitHub } from \"./binding/GitHub\";\nimport { RouteNameType, usePushHistory } from \"../../utils/routes\";\n\nenum SelectLanguage {\n    Chinese,\n    English,\n}\n\nexport const GeneralSettingPage = observer(function GeneralSettingPage() {\n    const globalStore = useContext(GlobalStoreContext);\n    const preferencesStore = useContext(PreferencesStoreContext);\n\n    const sp = useSafePromise();\n    const pushHistory = usePushHistory();\n    const t = useTranslate();\n    const language = useLanguage();\n\n    const [name, setName] = useState(globalStore.userName || \"\");\n    const [isRenaming, setRenaming] = useState(false);\n    const { bindings, refresh: refreshBindings } = useBindingList();\n\n    async function changeUserName(): Promise<void> {\n        if (name !== globalStore.userName) {\n            setRenaming(true);\n            await sp(rename(name));\n            setRenaming(false);\n            // Refresh user info in global store.\n            const result = await sp(loginCheck());\n            globalStore.updateUserInfo(result);\n            globalStore.updateLastLoginCheck(Date.now());\n        }\n    }\n\n    async function onUpload(file: File): Promise<void> {\n        try {\n            await uploadAvatar(file, t);\n        } catch (error) {\n            message.info(t(\"upload-avatar-failed\"));\n            throw error;\n        }\n    }\n\n    function changeLanguage(event: CheckboxChangeEvent): void {\n        const language: SelectLanguage = event.target.value;\n        void FlatI18n.changeLanguage(language === SelectLanguage.Chinese ? \"zh-CN\" : \"en\");\n    }\n\n    const changeAppearance = (event: CheckboxChangeEvent): void => {\n        const prefersColorScheme: FlatPrefersColorScheme = event.target.value;\n        preferencesStore.updatePrefersColorScheme(prefersColorScheme);\n    };\n\n    async function removeAccount(): Promise<void> {\n        const { alreadyJoinedRoomCount } = await sp(deleteAccountValidate());\n        if (alreadyJoinedRoomCount > 0) {\n            message.error(t(\"quit-all-rooms-before-delete-account\"));\n            return;\n        }\n        Modal.confirm({\n            content: t(\"confirm-delete-account\"),\n            onOk: async () => {\n                try {\n                    await sp(deleteAccount());\n                    globalStore.updateUserInfo(null);\n                    pushHistory(RouteNameType.LoginPage);\n                } catch (err) {\n                    errorTips(err);\n                }\n            },\n        });\n    }\n\n    return (\n        <UserSettingLayoutContainer>\n            <div className=\"general-setting-container\">\n                <div className=\"general-setting-user-profile\">\n                    <span className=\"general-setting-title\">{t(\"user-profile\")}</span>\n                    <div className=\"general-setting-user-avatar-wrapper\">\n                        <span className=\"general-setting-subtitle\">{t(\"avatar\")}</span>\n                        <UploadAvatar onUpload={onUpload} />\n                    </div>\n                    <div>\n                        <span className=\"general-setting-subtitle\">{t(\"username\")}</span>\n                        <Input\n                            disabled={isRenaming}\n                            id=\"username\"\n                            spellCheck={false}\n                            value={name}\n                            onChange={ev => setName(ev.currentTarget.value)}\n                        />\n                        <ConfirmButtons onConfirm={changeUserName} />\n                    </div>\n                    <div className=\"general-setting-binding-methods\">\n                        <BindWeChat\n                            globalStore={globalStore}\n                            isBind={bindings.wechat}\n                            onRefresh={refreshBindings}\n                        />\n                        <BindGitHub\n                            globalStore={globalStore}\n                            isBind={bindings.github}\n                            onRefresh={refreshBindings}\n                        />\n                    </div>\n                </div>\n                <div className=\"general-setting-select-language\">\n                    <span>{t(\"language-settings\")}</span>\n                    <Radio.Group\n                        defaultValue={\n                            language === \"zh-CN\" ? SelectLanguage.Chinese : SelectLanguage.English\n                        }\n                        onChange={changeLanguage}\n                    >\n                        <Radio value={SelectLanguage.Chinese}>\n                            <span className=\"radio-item-inner\">{t(\"chinese\")}</span>\n                        </Radio>\n                        <Radio value={SelectLanguage.English}>\n                            <span className=\"radio-item-inner\">English</span>\n                        </Radio>\n                    </Radio.Group>\n                </div>\n                <div className=\"general-setting-appearance-picker-container\">\n                    <span>{t(\"app-appearance-setting\")}</span>\n                    <AppearancePicker\n                        changeAppearance={changeAppearance}\n                        defaultValue={preferencesStore.prefersColorScheme}\n                    />\n                </div>\n                <div className=\"general-setting-join-options-box\">\n                    <div className=\"general-setting-join-options\">{t(\"join-options\")}</div>\n                    <Checkbox\n                        checked={preferencesStore.autoMicOn}\n                        onClick={() =>\n                            preferencesStore.updateAutoMicOn(!preferencesStore.autoMicOn)\n                        }\n                    >\n                        {t(\"turn-on-the-microphone\")}\n                    </Checkbox>\n                    <Checkbox\n                        checked={preferencesStore.autoCameraOn}\n                        onClick={() =>\n                            preferencesStore.updateAutoCameraOn(!preferencesStore.autoCameraOn)\n                        }\n                    >\n                        {t(\"turn-on-the-camera\")}\n                    </Checkbox>\n                </div>\n                <div className=\"general-setting-device-test-box\">\n                    <div className=\"general-setting-checkbox-title\">{t(\"device-test-option\")}</div>\n                    <Checkbox\n                        checked={!globalStore.isTurnOffDeviceTest}\n                        onClick={globalStore.toggleDeviceTest}\n                    >\n                        <span className=\"checkbox-item-inner\">{t(\"turn-on-device-test\")}</span>\n                    </Checkbox>\n                </div>\n                <div className=\"general-setting-recording-box\">\n                    <div className=\"general-setting-checkbox-title\">\n                        {t(\"recording-settings.title\")}\n                    </div>\n                    <Checkbox\n                        checked={preferencesStore.autoRecording}\n                        onClick={preferencesStore.toggleAutoRecording}\n                    >\n                        <span className=\"checkbox-item-inner\">\n                            {t(\"recording-settings.auto-recording\")}\n                        </span>\n                    </Checkbox>\n                </div>\n                <div className=\"general-setting-recording-box\">\n                    <div className=\"general-setting-checkbox-title\">\n                        {t(\"whiteboard-settings.title\")}\n                    </div>\n                    <Checkbox\n                        checked={preferencesStore.strokeTail}\n                        onClick={preferencesStore.toggleStrokeTail}\n                    >\n                        <span className=\"checkbox-item-inner\">\n                            {t(\"whiteboard-settings.pencil-tail\")}\n                        </span>\n                    </Checkbox>\n                </div>\n                <div className=\"general-setting-user-account\">\n                    <span className=\"general-setting-title\">{t(\"delete-account\")}</span>\n                    <div>\n                        <Button danger onClick={removeAccount}>\n                            {t(\"delete-account\")}\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </UserSettingLayoutContainer>\n    );\n});\n\nexport default GeneralSettingPage;\n"],"names":["GithubFilled","GithubFilledSvg","props","ref","_jsx","_objectSpread","icon","displayName","GithubFilled$1","React","WechatFilled","WechatFilledSvg","WechatFilled$1","lightSVG","darkSVG","autoSVG","AppearancePicker","defaultValue","changeAppearance","t","useTranslate","_jsxs","Radio","ConfirmButtons","onConfirm","sp","useSafePromise","loading","setLoading","useState","phase","setPhase","confirm","useCallback","catch","console","error","Button","_Fragment","UploadAvatar","observer","onUpload","globalStore","useContext","GlobalStoreContext","imageUrl","setImageUrl","userInfo","avatar","useEffect","updateInput","event","file","target","files","fileToDataUrl","then","classNames","Promise","resolve","reject","reader","FileReader","onload","result","onerror","readAsDataURL","USER_AVATAR_SIZE_LIMIT","uploadAvatar","size","info","Error","ticket","uploadAvatarStart","name","region","Region","CN_HZ","formData","FormData","encodedFileName","encodeURIComponent","append","filePath","policy","CLOUD_STORAGE_OSS_ALIBABA_CONFIG","accessKey","signature","Axios","post","policyURL","headers","avatarURL","uploadAvatarFinish","fileUUID","updateUserAvatar","BindWeChat","isBind","onRefresh","authUUID","setAuthUUID","qrCodeURL","setQRCodeURL","cancel","timer","NaN","waitUntilBindFinish","bindingProcess","processing","window","setTimeout","status","Number","isNaN","clearTimeout","bindWeChat","v4","setBindingAuthUUID","getQRCodeURL","FLAT_SERVER_USER_BINDING","WECHAT_CALLBACK","unbind","Modal","content","onOk","token","removeBinding","LoginPlatform","WeChat","updateUserToken","err","errorTips","color","defaultBindings","useBindingList","bindings","setBindings","refresh","listBindings","BindGitHub","bindGitHub","open","getGithubURL","GITHUB_CALLBACK","Github","GeneralSettingPage","preferencesStore","PreferencesStoreContext","pushHistory","usePushHistory","language","useLanguage","setName","userName","isRenaming","setRenaming","refreshBindings","changeUserName","rename","loginCheck","updateUserInfo","updateLastLoginCheck","Date","now","changeLanguage","value","FlatI18n","SelectLanguage","prefersColorScheme","updatePrefersColorScheme","removeAccount","alreadyJoinedRoomCount","deleteAccountValidate","deleteAccount","RouteNameType","LoginPage","UserSettingLayoutContainer","Input","ev","currentTarget","wechat","github","Checkbox","autoMicOn","updateAutoMicOn","autoCameraOn","updateAutoCameraOn","isTurnOffDeviceTest","toggleDeviceTest","autoRecording","toggleAutoRecording","strokeTail","toggleStrokeTail"],"mappings":"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"}