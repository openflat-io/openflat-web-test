import{bM as f,bN as T,b8 as b,aZ as h,bm as w,k as a,bC as y,ba as x,bx as S,aP as M,d3 as p,c$ as P,d4 as k,q as v,d5 as C}from"./index.43c4ffc0.js";import{u as R}from"./lifecycle.32153b61.js";import{E as D}from"./index.1445c18d.js";import{e as B}from"./routes.73fc4946.js";import{u as E}from"./use-login-check.e01c4832.js";import{g as I}from"./index.a792be8b.js";function O(s,t){var i;if(arguments.length<1)throw new TypeError("1 argument required, but only none provided present");var o=f((i=t==null?void 0:t.nearestTo)!==null&&i!==void 0?i:1);if(o<1||o>30)throw new RangeError("`options.nearestTo` must be between 1 and 30");var r=T(s),d=r.getSeconds(),c=r.getMinutes()+d/60,m=I(t==null?void 0:t.roundingMethod),u=m(c/o)*o,g=c%o,l=Math.round(g/o)*o;return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),u+l)}const L=()=>{const s=new Date;let t=O(s,{nearestTo:30});return C(t,s)&&(t=p(t,30)),t.setSeconds(0),t.setMilliseconds(0),t},j=b(function(){E();const t=h(),i=w(),o=R(),r=a.exports.useContext(y),d=a.exports.useContext(x),c=a.exports.useContext(S),[m,u]=a.exports.useState(!1),[g]=a.exports.useState(()=>{var n;const e=L();return{title:(n=d.userInfo)!=null&&n.name?t("schedule-room-default-title",{name:d.userInfo.name}):"",type:M.BigClass,isPeriodic:!1,region:c.getRegion(),beginTime:new Date(e),endTime:p(e,30),periodic:{endType:"rate",weeks:[P(e)],rate:7,endTime:k(e,6)}}});return v(D,{initialValues:g,loading:m,type:"schedule",onSubmit:l});async function l(e){u(!0);try{const n={title:e.title,type:e.type,region:e.region,beginTime:e.beginTime.valueOf(),endTime:e.endTime.valueOf()};e.isPeriodic?await o(r.createPeriodicRoom({...n,periodic:e.periodic.endType==="rate"?{weeks:e.periodic.weeks,rate:e.periodic.rate}:{weeks:e.periodic.weeks,endTime:e.periodic.endTime.valueOf()}})):await o(r.createOrdinaryRoom(n)),i.goBack()}catch(n){console.error(n),B(n),u(!1)}}});export{j as UserScheduledPage,j as default};
//# sourceMappingURL=index.3cc239c9.js.map
