{"version":3,"file":"index.891e0e8b.js","sources":["../../../../node_modules/.pnpm/date-fns@2.29.3/node_modules/date-fns/esm/differenceInCalendarDays/index.js","../../../../node_modules/.pnpm/date-fns@2.29.3/node_modules/date-fns/esm/fp/_lib/convertToFP/index.js","../../../../node_modules/.pnpm/date-fns@2.29.3/node_modules/date-fns/esm/fp/differenceInCalendarDays/index.js","../../../../node_modules/.pnpm/date-fns@2.29.3/node_modules/date-fns/esm/fp/format/index.js","../../../../packages/flat-components/src/components/InviteModal/index.tsx"],"sourcesContent":["import getTimezoneOffsetInMilliseconds from \"../_lib/getTimezoneOffsetInMilliseconds/index.js\";\nimport startOfDay from \"../startOfDay/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_DAY = 86400000;\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param {Date|Number} dateLeft - the later date\n * @param {Date|Number} dateRight - the earlier date\n * @returns {Number} the number of calendar days\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\n\nexport default function differenceInCalendarDays(dirtyDateLeft, dirtyDateRight) {\n  requiredArgs(2, arguments);\n  var startOfDayLeft = startOfDay(dirtyDateLeft);\n  var startOfDayRight = startOfDay(dirtyDateRight);\n  var timestampLeft = startOfDayLeft.getTime() - getTimezoneOffsetInMilliseconds(startOfDayLeft);\n  var timestampRight = startOfDayRight.getTime() - getTimezoneOffsetInMilliseconds(startOfDayRight); // Round the number of days to the nearest integer\n  // because the number of milliseconds in a day is not constant\n  // (e.g. it's different in the day of the daylight saving time clock shift)\n\n  return Math.round((timestampLeft - timestampRight) / MILLISECONDS_IN_DAY);\n}","export default function convertToFP(fn, arity) {\n  var a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n  if (a.length >= arity) {\n    return fn.apply(null, a.slice(0, arity).reverse());\n  }\n\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return convertToFP(fn, arity, a.concat(args));\n  };\n}","// This file is generated automatically by `scripts/build/fp.ts`. Please, don't change it.\nimport fn from \"../../differenceInCalendarDays/index.js\";\nimport convertToFP from \"../_lib/convertToFP/index.js\";\nexport default convertToFP(fn, 2);","// This file is generated automatically by `scripts/build/fp.ts`. Please, don't change it.\nimport fn from \"../../format/index.js\";\nimport convertToFP from \"../_lib/convertToFP/index.js\";\nexport default convertToFP(fn, 2);","import \"./index.less\";\n\nimport React, { useMemo } from \"react\";\nimport { Modal } from \"antd\";\nimport { differenceInCalendarDays, format } from \"date-fns/fp\";\nimport { RoomInfo, Week } from \"../../types/room\";\nimport { formatInviteCode, getWeekNames } from \"../../utils/room\";\nimport { useLanguage, useTranslate } from \"@netless/flat-i18n\";\n\nconst completeTimeFormat = /* @__PURE__ */ format(\"yyyy-MM-dd HH:mm\");\nconst onlySuffixTimeFormat = /* @__PURE__ */ format(\"HH:mm\");\n\nexport interface InviteModalProps {\n    visible: boolean;\n    room: RoomInfo;\n    userName: string;\n    baseUrl: string;\n    // repeated weeks for periodic rooms\n    periodicWeeks?: Week[];\n    onCopy: (text: string) => void;\n    onCancel: () => void;\n}\n\nexport const InviteModal: React.FC<InviteModalProps> = ({\n    visible,\n    room,\n    periodicWeeks,\n    userName,\n    baseUrl,\n    onCopy,\n    onCancel,\n}) => {\n    const t = useTranslate();\n    const language = useLanguage();\n    const { beginTime, endTime, periodicUUID, roomUUID, inviteCode, title } = room;\n    const uuid = periodicUUID || roomUUID;\n\n    const formattedTimeRange = useMemo<string>(() => {\n        if (!beginTime || !endTime) {\n            return \"\";\n        }\n\n        const formatBeginTime = completeTimeFormat(beginTime);\n        const formatEndTime =\n            differenceInCalendarDays(beginTime, endTime) === 0\n                ? onlySuffixTimeFormat(endTime)\n                : completeTimeFormat(endTime);\n\n        return `${formatBeginTime}~${formatEndTime}`;\n    }, [beginTime, endTime]);\n\n    const onCopyClicked = (): void => {\n        const basePrefixText =\n            t(\"invite-prefix\", { userName, title }) +\n            \"\\n\" +\n            (formattedTimeRange ? t(\"invite-begin-time\", { time: formattedTimeRange }) : \"\");\n        const baseSuffixText =\n            \"\\n\" +\n            \"\\n\" +\n            t(\"invite-suffix\", { uuid: formatInviteCode(uuid, inviteCode) }) +\n            \"\\n\" +\n            t(\"invite-join-link\", { link: `${baseUrl}/join/${uuid}` });\n\n        if (periodicUUID) {\n            const content = periodicWeeks\n                ? t(\"repeat-weeks\", { weeks: getWeekNames(periodicWeeks, language) })\n                : \"\";\n\n            onCopy(`${basePrefixText}${content}${baseSuffixText}`);\n        } else {\n            onCopy(`${basePrefixText}${baseSuffixText}`);\n        }\n    };\n\n    return (\n        <Modal\n            cancelText={t(\"cancel\")}\n            className=\"invite-modal\"\n            okText={t(\"copy\")}\n            open={visible}\n            width={460}\n            onCancel={onCancel}\n            onOk={onCopyClicked}\n        >\n            <div className=\"invite-modal-header\">\n                <span>{t(\"invite-title\", { userName })}</span>\n                <span>{t(\"join-and-book-by-room-uuid\")}</span>\n            </div>\n            <div className=\"invite-modal-content\">\n                <div className=\"invite-modal-content-item\">\n                    <span>{t(\"room-theme\")}</span>\n                    <span className=\"invite-modal-content-title\">{title}</span>\n                </div>\n                <div className=\"invite-modal-content-item\">\n                    <span>{t(\"room-uuid\")}</span>\n                    <span style={{ userSelect: \"text\" }}>{formatInviteCode(uuid, inviteCode)}</span>\n                </div>\n                {formattedTimeRange && (\n                    <div className=\"invite-modal-content-item\">\n                        <span>{t(\"begin-time\")}</span>\n                        <span>{formattedTimeRange}</span>\n                    </div>\n                )}\n                <div className=\"invite-modal-content-item\">\n                    <span>{t(\"join-link\")}</span>\n                    <span style={{ userSelect: \"text\" }}>\n                        {baseUrl}/join/{uuid}\n                    </span>\n                </div>\n            </div>\n        </Modal>\n    );\n};\n"],"names":["MILLISECONDS_IN_DAY","differenceInCalendarDays","dirtyDateLeft","dirtyDateRight","requiredArgs","startOfDayLeft","startOfDay","startOfDayRight","timestampLeft","getTimezoneOffsetInMilliseconds","timestampRight","convertToFP","fn","arity","a","_len","args","_key","format","completeTimeFormat","onlySuffixTimeFormat","InviteModal","visible","room","periodicWeeks","userName","baseUrl","onCopy","onCancel","t","useTranslate","language","useLanguage","beginTime","endTime","periodicUUID","roomUUID","inviteCode","title","uuid","formattedTimeRange","useMemo","formatBeginTime","formatEndTime","onCopyClicked","basePrefixText","time","baseSuffixText","formatInviteCode","link","content","weeks","getWeekNames","Modal","_jsxs","_jsx","userSelect"],"mappings":"8HAGA,IAAIA,EAAsB,MAgCX,SAASC,EAAyBC,EAAeC,EAAgB,CAC9EC,EAAa,EAAG,SAAS,EACzB,IAAIC,EAAiBC,EAAWJ,CAAa,EACzCK,EAAkBD,EAAWH,CAAc,EAC3CK,EAAgBH,EAAe,QAAS,EAAGI,EAAgCJ,CAAc,EACzFK,EAAiBH,EAAgB,QAAS,EAAGE,EAAgCF,CAAe,EAIhG,OAAO,KAAK,OAAOC,EAAgBE,GAAkBV,CAAmB,CAC1E,CC7Ce,SAASW,EAAYC,EAAIC,EAAO,CAC7C,IAAIC,EAAI,UAAU,OAAS,GAAK,UAAU,KAAO,OAAY,UAAU,GAAK,CAAA,EAE5E,OAAIA,EAAE,QAAUD,EACPD,EAAG,MAAM,KAAME,EAAE,MAAM,EAAGD,CAAK,EAAE,QAAO,CAAE,EAG5C,UAAY,CACjB,QAASE,EAAO,UAAU,OAAQC,EAAO,IAAI,MAAMD,CAAI,EAAGE,EAAO,EAAGA,EAAOF,EAAME,IAC/ED,EAAKC,GAAQ,UAAUA,GAGzB,OAAON,EAAYC,EAAIC,EAAOC,EAAE,OAAOE,CAAI,CAAC,CAChD,CACA,CCXA,MAAAf,EAAeU,EAAYC,EAAI,CAAC,ECAhCM,EAAeP,EAAYC,EAAI,CAAC,ECM1BO,IAA4C,kBAAD,EAC3CC,IAA8C,OAAD,EAatCC,EAA0C,CAAC,CACpDC,QAAAA,EACAC,KAAAA,EACAC,cAAAA,EACAC,SAAAA,EACAC,QAAAA,EACAC,OAAAA,EACAC,SAAAA,CAPoD,IAQlD,CACF,MAAMC,EAAIC,IACJC,EAAWC,IACX,CAAEC,UAAAA,EAAWC,QAAAA,EAASC,aAAAA,EAAcC,SAAAA,EAAUC,WAAAA,EAAYC,MAAAA,CAAUf,EAAAA,EACpEgB,EAAOJ,GAAgBC,EAEvBI,EAAqBC,EAAAA,QAAAA,QAAgB,IAAM,CACzC,GAAA,CAACR,GAAa,CAACC,EACR,MAAA,GAGLQ,MAAAA,EAAkBvB,EAAmBc,CAAD,EACpCU,EACF1C,EAAyBgC,EAAWC,CAAZ,IAAyB,EAC3Cd,EAAqBc,CAAD,EACpBf,EAAmBe,CAAD,EAE5B,MAAQ,GAAEQ,KAAmBC,GAAAA,EAC9B,CAACV,EAAWC,CAAZ,CAZ+B,EAc5BU,EAAgB,IAAY,CACxBC,MAAAA,EACFhB,EAAE,gBAAiB,CAAEJ,SAAAA,EAAUa,MAAAA,CAA9B,CAAA,EACD;AAAA,GACCE,EAAqBX,EAAE,oBAAqB,CAAEiB,KAAMN,CAAAA,CAA9B,EAAsD,IAC3EO,EACF;AAAA;AAAA,EAEAlB,EAAE,gBAAiB,CAAEU,KAAMS,EAAiBT,EAAMF,CAAP,CAAA,CAA1C,EACD;AAAA,EACAR,EAAE,mBAAoB,CAAEoB,KAAO,GAAEvB,UAAgBa,GAAAA,CAAhD,EAEL,GAAIJ,EAAc,CACRe,MAAAA,EAAU1B,EACVK,EAAE,eAAgB,CAAEsB,MAAOC,EAAa5B,EAAeO,CAAhB,CAAtC,CAAA,EACD,GAEEJ,EAAA,GAAEkB,IAAiBK,IAAUH,GAA/B,CAAA,MAEEpB,EAAA,GAAEkB,IAAiBE,GAArB,CACT,EAGL,SACKM,EAAD,CACI,WAAYxB,EAAE,QAAD,EACb,UAAU,eACV,OAAQA,EAAE,MAAD,EACT,KAAMP,EACN,MAAO,IACP,SAAAM,EACA,KAAMgB,EAPV,SASI,CAAAU,EAAA,MAAA,CAAK,UAAU,sBAAf,SACI,CAAAC,EAAA,OAAA,CAAA,SAAO1B,EAAE,eAAgB,CAAEJ,SAAAA,CAAAA,CAAnB,CAAA,CAAR,EACA8B,EAAA,OAAA,CAAA,SAAO1B,EAAE,4BAAD,CAAA,CAFZ,CAAA,CAAA,CAAA,EAIAyB,EAAA,MAAA,CAAK,UAAU,uBAAf,SACI,CAAAA,EAAA,MAAA,CAAK,UAAU,4BAAf,SACI,CAAAC,EAAA,OAAA,CAAA,SAAO1B,EAAE,YAAD,CAAA,CAAR,EACA0B,EAAA,OAAA,CAAM,UAAU,6BAAhB,SAA8CjB,CAAAA,CAFlD,CAAA,CAAA,CAAA,EAIAgB,EAAA,MAAA,CAAK,UAAU,4BAAf,SACI,CAAAC,EAAA,OAAA,CAAA,SAAO1B,EAAE,WAAD,CAAA,CAAR,EACA0B,EAAA,OAAA,CAAM,MAAO,CAAEC,WAAY,MAAd,EAAb,SAAsCR,EAAiBT,EAAMF,CAAP,CAAA,CAF1D,CAAA,CAAA,CALJ,EASKG,GACGc,EAAA,MAAA,CAAK,UAAU,4BAAf,SACI,CAAAC,EAAA,OAAA,CAAA,SAAO1B,EAAE,YAAD,CAAA,CAAR,EACA0B,EAAA,OAAA,CAAA,SAAOf,CAAAA,CAFX,CAAA,CAAA,CAAA,EAKJc,EAAA,MAAA,CAAK,UAAU,4BAAf,SACI,CAAAC,EAAA,OAAA,CAAA,SAAO1B,EAAE,WAAD,CAAA,CAAR,EACAyB,EAAA,OAAA,CAAM,MAAO,CAAEE,WAAY,MAAd,EAAb,SACK9B,CAAAA,WAAea,CADpB,CAAA,CAFJ,CAAA,CAAA,CAfJ,CAAA,CAAA,CAbJ,CAAA,CAAA,CADJ,CAsCH"}