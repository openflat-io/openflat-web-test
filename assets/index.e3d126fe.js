import{q as r,b0 as x,k as f,bx as P,b4 as N,cA as C,ab as o,dA as l,cq as S,dz as m,x as b}from"./index.43c4ffc0.js";import{u as k}from"./hooks.a08a5162.js";const y=({file:e})=>r("div",{className:"file-preview-audio-container",children:r("audio",{controls:!0,src:e.fileURL})}),F=({file:e})=>r("div",{className:"file-preview-image-container",children:r("img",{alt:e.fileName,src:e.fileURL})}),L=({file:e})=>r("div",{className:"file-preview-video-container",children:r("video",{controls:!0,src:e.fileURL})});const U=e=>{const i=x(),h=f.exports.useContext(P),p=f.exports.useContext(N),u=C(),[v]=k(),[c,g]=o.useState(null),[n,w]=o.useState(),s=o.useMemo(()=>{if(e.file)return e.file;try{return JSON.parse(decodeURIComponent(u.file))}catch{return null}},[e.file,u]),d=o.useMemo(()=>(/\.([^.]+)$/.exec((s==null?void 0:s.fileName)||"")||["",""])[1].toLowerCase(),[s]);return l(()=>{const t=v.get("theme");if(!t)return;const a=t==="dark"?"dark":t==="light"?"light":"auto";h.updatePrefersColorScheme(a)},[]),l(()=>{let t=null;return i(S.getInstance().requestService(`file-preview:${d}`,!1)).then(a=>{t=a,w(a)}),()=>{var a;(a=t==null?void 0:t.destroy)==null||a.call(t)}},[]),l(()=>{s&&c&&n&&n.preview(s,c)},[s,c,n]),s?r("div",{ref:g,className:b("file-preview-container",{"telebox-color-scheme-dark":p}),style:{height:"100%",overflow:"hidden"},children:n===null&&R(s,d)}):r(m,{})};function R(e,i){switch(i){case"jpg":case"jpeg":case"png":case"webp":return r(F,{file:e});case"mp3":return r(y,{file:e});case"mp4":return r(L,{file:e})}return r(m,{})}export{U as FilePreviewPage,U as default};
//# sourceMappingURL=index.e3d126fe.js.map
