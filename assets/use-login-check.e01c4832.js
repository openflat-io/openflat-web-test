import{k as n,ba as c,bc as l}from"./index.43c4ffc0.js";import{h as f,g,e as h}from"./routes.73fc4946.js";function m(){const a=f(),e=n.exports.useContext(c),[r,i]=n.exports.useState(!1);return n.exports.useEffect(()=>{let s=!1;async function u(){var o;if(!((o=e.userInfo)!=null&&o.token))return!1;if(e.lastLoginCheck&&Date.now()-e.lastLoginCheck<2*60*60*1e3)return!0;try{const t=await g();return e.updateUserInfo(t),e.updateLastLoginCheck(Date.now()),k(t.token),t.hasPhone}catch(t){e.updateLastLoginCheck(null),console.error(t),h(t)}return!1}return u().then(o=>{s||(o?i(!0):a(l.LoginPage))}),()=>{s=!0}},[]),r}function k(a){document.cookie=`flatJWTToken=${a}; SameSite=Lax; domain=whiteboard.agora.io; max-age=${2505600}`}export{k as s,m as u};
//# sourceMappingURL=use-login-check.e01c4832.js.map
